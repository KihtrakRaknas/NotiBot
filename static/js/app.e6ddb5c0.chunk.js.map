{"version":3,"sources":["utils/contexts.js","utils/useRootNavigation.js","screens/Loading.js","screens/Login.js","screens/SignUp.js","utils/hashStringToColor.js","screens/Home.js","screens/Settings.js","screens/Project.js","utils/constants.js","screens/Notification.js","screens/ProjectOptions.js","App.js"],"names":["ProjectsContext","React","createContext","DeepLinkContext","MainStackLoadedContext","navigationRef","createRef","dispatch","action","current","linkTo","path","config","state","getStateFromPath","getActionFromState","undefined","useRootNavigation","Loading","View","style","styles","container","Text","loadingText","ActivityIndicator","size","color","StyleSheet","create","flex","justifyContent","alignItems","backgroundColor","marginBottom","Login","navigation","useState","email","setEmail","password","setPassword","errorMessage","setErrorMessage","useEffect","Platform","OS","WebBrowser","Constants","appOwnership","GoogleSignIn","catch","message","Alert","alert","Google","expoClientId","webClientId","androidClientId","iosClientId","request","response","promptAsync","console","log","type","id_token","params","credential","firebase","auth","GoogleAuthProvider","signInWithCredential","error","KeyboardAvoidingView","behavior","SafeAreaView","title","textInputBox","TextInput","placeholder","placeholderTextColor","autoCapitalize","textInput","onChangeText","value","secureTextEntry","TouchableOpacity","submitButton","onPress","signInWithEmailAndPassword","then","user","includes","substring","indexOf","fontSize","disabled","button","light","a","async","idToken","titleStyle","navigate","borderBottomColor","borderBottomWidth","alignSelf","height","fontWeight","padding","borderRadius","margin","SignUp","route","createUserWithEmailAndPassword","string","total","charCodeAt","firstPartOfString","toString","substr","prefix","Linking","Home","useContext","projectsData","listenToProject","stopListeningToProject","loading","setLoading","projects","setProjects","numberOfProjects","setNumberOfProjects","visible","setVisible","projectName","setProjectName","initialDeepLink","mainStackLoadedRef","useLinkTo","currentUserUid","currentUser","uid","db","firestore","setNotificationCategories","Notifications","identifier","buttonTitle","options","opensAppToForeground","isAuthenticationRequired","isDestructive","previewPlaceholder","submitButtonTitle","isDevice","existingStatus","status","finalStatus","token","data","collection","doc","set","FieldValue","arrayUnion","merge","name","importance","MAX","vibrationPattern","lightColor","registerForPushNotificationsAsync","getTimeStamp","item","length","timestamp","useLayoutEffect","parsedDeepLink","queue","openDrawer","mainStackLoaded","encodeURI","subscriptionFunctions","unsub","onSnapshot","includeMetadataChanges","metadata","hasPendingWrites","subFunc","filter","project","sort","b","push","toggleOverlay","isVisible","onBackdropPress","ModalComponent","WebModal","Modal","overlayStyle","width","maxWidth","bottom","match","code","leftComponent","icon","centerComponent","text","rightComponent","LinearGradient","colors","start","x","y","end","FlatList","renderItem","marginVertical","bottomDivider","topDivider","linearGradientProps","hashStringToColor","ViewComponent","containerStyle","rounded","Content","Title","listItemTitle","Subtitle","listItemSubtitle","Chevron","warn","keyExtractor","ListEmptyComponent","flexGrow","marginTop","paddingTop","paddingHorizontal","textAlign","Settings","Button","signOut","Project","projTitle","notifications","updateNotifications","isLargeScreen","useWindowDimensions","handleProjUpdate","newData","setOptions","headerRight","headerLeft","reverse","index","listItem","subtitle","body","getSubtitle","left","Date","toLocaleString","groups","Notification","resValue","notification","updateNotification","webhookParamValue","setWebhookParamValue","webhookRes","setWebhookRes","checkCanDelete","canDelete","setCanDelete","oldState","dangerouslyGetState","JSON","stringify","routes","prevRoute","reset","newIndex","setParams","goBack","deleteNotification","arrayRemove","headerButtonTitle","ScrollView","headerView","h1","subheaderView","textMargin","h4","right","dataView","webhook","webhookParam","url","fetch","res","e","flexDirection","groupDescriptions","users","setUsers","currentGroupNum","setCurrentGroupNum","canLeave","setCanLeave","profileInfoMap","useRef","tempUsers","groupName","group","profile","method","headers","json","removeUser","getIdToken","contentContainerStyle","userElements","itemIndex","controller","key","zIndex","source","uri","photoURL","displayName","adjustsFontSizeToFit","numberOfLines","items","map","el","label","defaultValue","itemStyle","overflow","instance","onChangeItem","newValue","selectItem","cancelable","onDismiss","updateObj","forEach","update","arr","groupIndex","descContainer","groupTitle","groupText","groupDesc","buttonStyle","deleteButton","delete","leaveButton","explanationText","paddingBottom","marginRight","flexBasis","flexShrink","flexWrap","marginHorizontal","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","err","Stack","createStackNavigator","Drawer","createDrawerNavigator","App","callbacks","listeners","notificationListener","responseListener","loaded","setInitialDeepLink","Dimensions","get","openLinkInApp","appUrl","notifContent","content","showMessage","description","hideStatusBar","firebaseData","notifMetaData","actionIdentifier","userText","fetchCallback","resStr","errored","useReducer","prevState","isLoading","isSignedIn","onAuthStateChanged","projContext","callback","callOnInit","invCallback","splice","ProjectStack","Navigator","screenOptions","headerStyle","headerTintColor","headerTitleStyle","Screen","component","ProjectOptions","NavigationContainer","ref","linking","prefixes","screens","ProjectsDrawerScreen","Projects","subscribe","listener","onReceiveURL","Provider","headerShown","animationTypeForReplace","drawerType","drawerStyle","overlayColor","drawerContent","props","gestureEnabled","position"],"mappings":"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","file":"static/js/app.e6ddb5c0.chunk.js","sourcesContent":["import React from 'react';\r\nexport const ProjectsContext = React.createContext();\r\nexport const DeepLinkContext = React.createContext();\r\nexport const MainStackLoadedContext = React.createContext();","import { createRef } from 'react';\r\nimport { getActionFromState, getStateFromPath } from '@react-navigation/native';\r\n\r\nexport const navigationRef = createRef();\r\n\r\nexport function dispatch(action) {\r\n    navigationRef.current?.dispatch(action);\r\n}\r\n\r\nexport function linkTo(path, config = null) {\r\n  var state = getStateFromPath(path, config);\r\n  var action = getActionFromState(state);\r\n  if (action !== undefined) {\r\n    dispatch(action);\r\n  }\r\n}\r\n\r\nconst useRootNavigation = () => ({\r\n    navigationRef,\r\n  linkTo\r\n});\r\n\r\nexport default useRootNavigation","import React from 'react';\r\nimport { View, Text, ActivityIndicator, StyleSheet } from 'react-native'\r\n\r\nexport default function Loading() {\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.loadingText}>Loading</Text>\r\n      <ActivityIndicator size=\"large\" color=\"white\"/>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor:\"red\"\r\n  },\r\n  loadingText:{\r\n    marginBottom:20,\r\n    color:\"white\"\r\n  }\r\n})","import React from 'react';\r\nimport { StyleSheet, Text, TextInput, View, Alert, KeyboardAvoidingView, TouchableOpacity, SafeAreaView, Platform} from 'react-native'\r\nimport firebase from 'firebase';\r\nimport * as Google from 'expo-auth-session/providers/google';\r\n// import * as Google from 'expo-google-app-auth';\r\nimport * as GoogleSignIn from 'expo-google-sign-in';\r\nimport { SocialIcon } from 'react-native-elements';\r\nimport * as WebBrowser from 'expo-web-browser';\r\nimport { Button } from 'react-native-elements';\r\nimport Constants from 'expo-constants';\r\nWebBrowser.maybeCompleteAuthSession();\r\n\r\nexport default function Login({ navigation }) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [errorMessage, setErrorMessage] = React.useState(null);\r\n  \r\n\r\n  function handleLogin() {\r\n    firebase\r\n    .auth()\r\n    .signInWithEmailAndPassword(email, password)\r\n    .then((user) => {\r\n      //if(checkUserFeilds(doc.data()))\r\n        //navigation.navigate('LoggedIn')\r\n      // else\r\n      //   navigation.navigate('SetUp')\r\n    })\r\n    .catch(error => {\r\n      if(error.message.includes(\"The user may have been deleted\"))\r\n        error.message = error.message.substring(0,error.message.indexOf(\"The user may have been deleted\"))\r\n      Alert.alert(error.message)\r\n      setErrorMessage(error.message)\r\n    })\r\n  }  \r\n\r\n  React.useEffect(() => {\r\n    if(Platform.OS == 'android'){\r\n      WebBrowser.warmUpAsync();\r\n      \r\n      return () => {\r\n        WebBrowser.coolDownAsync();\r\n      };\r\n    }\r\n    if(Constants.appOwnership == \"standalone\"){ // init native sign in with google logic\r\n\r\n      GoogleSignIn.initAsync({\r\n        // You may ommit the clientId when the firebase `googleServicesFile` is configured\r\n        // clientId: '<YOUR_IOS_CLIENT_ID>',\r\n        // Provide other custom options...\r\n      }).catch (({ message }) => {\r\n        Alert.alert('GoogleSignIn.initAsync(): ' + message);\r\n      })\r\n    }\r\n\r\n  }, []);\r\n\r\n  // const config = {\r\n  //   //\r\n  //   //androidClientId:\"\",\r\n  //   iosClientId: \"896187396809-2ks3dj1dogegfsc8a9jr32s33tt4rben.apps.googleusercontent.com\",\r\n  //   androidClientId: \"896187396809-tn8u9tp3thnvv07njp6ik46j8ot6k6lc.apps.googleusercontent.com\"\r\n  // }\r\n\r\n  const [request, response, promptAsync] = Google.useIdTokenAuthRequest(\r\n    {\r\n      expoClientId: '896187396809-tn4obhk9l23t5u8uhmrspmn89iph7lr0.apps.googleusercontent.com',\r\n      webClientId: '896187396809-5tbhq093deljombkbflt9c5mrfu7qvum.apps.googleusercontent.com',\r\n      // clientId: '896187396809-89ltb58u1or8fnetjgn90btpmb4ghmaq.apps.googleusercontent.com',\r\n      androidClientId: '896187396809-i55h6jach0jrja5studqj9dr2iiuhf8a.apps.googleusercontent.com',\r\n      iosClientId: \"896187396809-2ks3dj1dogegfsc8a9jr32s33tt4rben.apps.googleusercontent.com\",\r\n    },\r\n  );\r\n\r\n  React.useEffect(() => {\r\n    console.log(\"response: \")\r\n    console.log(response)\r\n    if (response?.type === 'success') {\r\n      const { id_token } = response.params;\r\n      console.log(id_token)\r\n      const credential = firebase.auth.GoogleAuthProvider.credential(id_token);\r\n      firebase.auth().signInWithCredential(credential).catch((error) => {\r\n        console.log(error)\r\n        Alert.alert(error.message)\r\n      });\r\n    }\r\n  }, [response]);\r\n\r\n  return (\r\n    <KeyboardAvoidingView behavior=\"padding\" style={styles.container}>\r\n      <SafeAreaView style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\r\n        <Text style={styles.title}>Login</Text>\r\n        {errorMessage &&\r\n        <Text style={styles.errorMessage}>\r\n            {errorMessage}\r\n        </Text>} \r\n        <View style={styles.textInputBox}>\r\n          <TextInput\r\n            placeholder=\"Email\"\r\n            placeholderTextColor=\"white\"\r\n            autoCapitalize=\"none\"\r\n            style={styles.textInput}\r\n            onChangeText={setEmail}\r\n            value={email}\r\n          />\r\n        </View>\r\n        <View style={styles.textInputBox}>\r\n          <TextInput\r\n            secureTextEntry\r\n            placeholder=\"Password\"\r\n            placeholderTextColor=\"white\"\r\n            autoCapitalize=\"none\"\r\n            style={styles.textInput}\r\n            onChangeText={setPassword}\r\n            value={password}\r\n          />\r\n        </View>\r\n        <TouchableOpacity \r\n          style={[styles.submitButton,{backgroundColor:\"blue\"}]}\r\n          onPress={handleLogin}\r\n        >\r\n          <Text style={{color:\"white\",fontSize:20,}}>Sign In</Text>\r\n        </TouchableOpacity>\r\n        <SocialIcon\r\n          title={\"Sign In With Google\"}\r\n          disabled={(Constants.appOwnership != \"standalone\" || Platform.OS == 'web') && !request}\r\n          button={true}\r\n          light\r\n          style={styles.submitButton}\r\n          type={\"google\"}\r\n          onPress={async ()=>{\r\n            if(Constants.appOwnership != \"standalone\" || Platform.OS == 'web') {\r\n              console.log(\"promting async\")\r\n              promptAsync()\r\n            } else {\r\n              try {\r\n                await GoogleSignIn.askForPlayServicesAsync();\r\n                const { type, user } = await GoogleSignIn.signInAsync();\r\n                if (type === 'success') {\r\n                  const idToken = user.auth.idToken\r\n                  console.log(idToken)\r\n                  const credential = firebase.auth.GoogleAuthProvider.credential(idToken);\r\n                  firebase.auth().signInWithCredential(credential).catch((error) => {\r\n                    console.log(error)\r\n                    Alert.alert(error.message)\r\n                  });\r\n                }\r\n              } catch ({ message }) {\r\n                Alert.alert('login: Error:' + message);\r\n              }\r\n            }\r\n          }}\r\n        />\r\n        <Button\r\n          titleStyle={{color:\"white\"}}//\"#d1faff\"\r\n          title=\"Don't have an account? Sign Up\"\r\n          disabled={(Constants.appOwnership != \"standalone\" || Platform.OS != 'web') && !request}\r\n          onPress={() => navigation.navigate('SignUp',{email})}\r\n          type=\"clear\"\r\n        />\r\n      </SafeAreaView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor:\"red\",\r\n  },\r\n  textInputBox: {\r\n    borderBottomColor:\"white\",\r\n    borderBottomWidth: 1,\r\n    marginBottom: 40,\r\n    alignSelf: 'stretch',\r\n  },\r\n  textInput: {\r\n    fontSize: 24,\r\n    height: 40,\r\n    fontWeight: '200',\r\n    marginBottom: 0,\r\n    color:\"white\",\r\n  },\r\n  title: {\r\n    fontSize:50,\r\n    marginBottom:30,\r\n    color:\"white\"\r\n  },\r\n  submitButton:{\r\n    alignItems: 'center',\r\n    padding:15,\r\n    borderRadius:7,\r\n    marginBottom:10,\r\n    margin:7,\r\n    alignSelf: 'stretch',\r\n  },\r\n  errorMessage:{\r\n    color: 'blue', marginBottom:20\r\n  }\r\n})","import React from 'react'\r\nimport { StyleSheet, Text, TextInput, View,  Alert, KeyboardAvoidingView, TouchableOpacity, SafeAreaView } from 'react-native'\r\nimport firebase from 'firebase';\r\nimport { Button } from 'react-native-elements';\r\n\r\nexport default function SignUp({ navigation, route}) {\r\n    const [email, setEmail] = React.useState(route.params.email)\r\n    const [password, setPassword] = React.useState(null)\r\n    const [errorMessage, setErrorMessage] = React.useState(null)\r\n    const handleSignUp = () => {\r\n      firebase\r\n        .auth()\r\n        .createUserWithEmailAndPassword(email, password)\r\n        .then(() => {\r\n          // firebase.firestore().collection('Users').doc(currentUser.uid).onSnapshot((doc) => {\r\n          //   console.log(\"Current data: \", doc.data());\r\n          //   if(checkUserFeilds(doc.data()))\r\n          //     this.props.navigation.navigate('LoggedIn')\r\n          //   else\r\n          //     this.props.navigation.navigate('SetUp')\r\n          // });\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(error.message)\r\n          Alert.alert(error.message)\r\n        })\r\n    }\r\n    return (\r\n      <KeyboardAvoidingView behavior=\"padding\" style={styles.container}>\r\n        <SafeAreaView style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>{/*  SafeAreaView makes it nice looking on iPad */}\r\n          <Text style={styles.title}>Sign Up</Text>\r\n          {errorMessage &&\r\n          <Text style={{ color: 'blue', marginBottom:20 }}>\r\n              {errorMessage}\r\n          </Text>} \r\n          <View style={styles.textInputBox}>\r\n            <TextInput\r\n              placeholder=\"Email\"\r\n              placeholderTextColor=\"white\"\r\n              autoCapitalize=\"none\"\r\n              style={styles.textInput}\r\n              onChangeText={setEmail}\r\n              value={email}\r\n            />\r\n          </View>\r\n          <View style={styles.textInputBox}>\r\n            <TextInput\r\n              //secureTextEntry\r\n              placeholder=\"Password\"\r\n              placeholderTextColor=\"white\"\r\n              autoCapitalize=\"none\"\r\n              style={styles.textInput}\r\n              onChangeText={setPassword}\r\n              value={password}\r\n            />\r\n          </View>\r\n          <TouchableOpacity \r\n            style={styles.submitButton}\r\n            onPress={handleSignUp}\r\n          >\r\n            <Text style={{color:\"white\",fontSize:20,}}>Create Account</Text>\r\n          </TouchableOpacity>\r\n          <Button\r\n            titleStyle={{color:\"white\"}}//\"#d1faff\"\r\n            title=\"Already have an account? Login\"\r\n            onPress={() => navigation.navigate('SignIn')}\r\n            type=\"clear\"\r\n          />\r\n        </SafeAreaView>\r\n      </KeyboardAvoidingView>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor:\"red\",\r\n    \r\n  },\r\n  textInputBox: {\r\n    borderBottomColor:\"white\",\r\n    borderBottomWidth: 1,\r\n    marginBottom: 40,\r\n    alignSelf: 'stretch',\r\n  },\r\n  textInput: {\r\n    alignSelf: 'stretch',\r\n    fontSize: 24,\r\n    height: 40,\r\n    fontWeight: '200',\r\n    marginBottom: 0,\r\n    color:\"white\",\r\n  },\r\n  title: {\r\n    fontSize:50,\r\n    marginBottom:30,\r\n    color:\"white\"\r\n  },\r\n  submitButton:{\r\n    alignItems: 'center',\r\n    backgroundColor:\"blue\",\r\n    alignSelf: 'stretch',\r\n    padding:15,\r\n    borderRadius:7,\r\n    marginBottom:10\r\n  },\r\n})","export default (string)=>{\r\n    let total = 0;\r\n    for(let char of string)\r\n        total += char.charCodeAt(0)\r\n    // '}' is 125\r\n    // ' ' is 32\r\n    total%=126\r\n    // total-=32\r\n    total/=(126)\r\n    const firstPartOfString = '#' + total.toString(16).substr(2, 6)\r\n    console.log(firstPartOfString)\r\n    return [ firstPartOfString + \"00\", firstPartOfString + \"30\"]\r\n}","import React, { useRef, useContext, useLayoutEffect, useEffect } from 'react'\r\nimport { StyleSheet, Platform, Image, Text, View, FlatList, ActivityIndicator, Modal, SafeAreaView, TextInput, KeyboardAvoidingView, ScrollView } from 'react-native'\r\nimport { ListItem, Button, Overlay, Avatar, Header } from 'react-native-elements'\r\nimport firebase from 'firebase';\r\nimport * as Notifications from 'expo-notifications'\r\nimport Constants from 'expo-constants';\r\nimport WebModal from 'modal-react-native-web';\r\nimport hashStringToColor from '../utils/hashStringToColor'\r\nimport { LinearGradient } from 'expo-linear-gradient';\r\nimport { ProjectsContext, DeepLinkContext, MainStackLoadedContext } from '../utils/contexts'\r\nimport { showMessage, hideMessage } from \"react-native-flash-message\";\r\nimport * as Linking from 'expo-linking';\r\nimport { useLinkTo  } from '@react-navigation/native';\r\nimport { Alert } from 'react-native';\r\n\r\nconst prefix = Linking.createURL('/');\r\n\r\nexport default function Home({ navigation }) {\r\n  const { projectsData, listenToProject, stopListeningToProject } = React.useContext(ProjectsContext);\r\n  // const notificationListener = useRef();\r\n  // const responseListener = useRef();\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [projects, setProjects] = React.useState([]);\r\n  const [numberOfProjects, setNumberOfProjects] = React.useState(null);\r\n  const [visible, setVisible] = React.useState(false);\r\n  const [projectName, setProjectName] = React.useState('');\r\n  const [errorMessage, setErrorMessage] = React.useState('');\r\n  const initialDeepLink = useContext(DeepLinkContext)\r\n  const mainStackLoadedRef = useContext(MainStackLoadedContext)\r\n  const linkTo = useLinkTo();\r\n\r\n  const currentUserUid = firebase.auth().currentUser.uid;\r\n  const db = firebase.firestore();\r\n\r\n  const resetModalState = () => {\r\n    setProjectName('')\r\n    setErrorMessage('')\r\n  }\r\n\r\n  async function createNewProject() {\r\n    const valid = await checkProjName()\r\n    if (valid) {\r\n      try{\r\n        await db.collection('Projects').doc(projectName).set({\r\n          'Owner': firebase.firestore.FieldValue.arrayUnion(currentUserUid)\r\n        })\r\n        await db.collection('Users').doc(currentUserUid).set({\r\n          'Projects': firebase.firestore.FieldValue.arrayUnion(projectName)\r\n        }, { merge: true })\r\n        setVisible(false)\r\n      } catch(e) {\r\n        if(e.code == \"permission-denied\" || e.code == \"already-exists\"){\r\n          setErrorMessage(`Name already taken: ${projectName}`)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  async function checkProjName() {\r\n    if (projectName.length < 2) {\r\n      setErrorMessage(`Your name must be at least 2 characters. You only have: ${projectName.length}`)\r\n      return false\r\n    }\r\n    if (!projectName.match(\"^[A-Za-z0-9]+$\")){\r\n      setErrorMessage(`Your name must only have letters and numbers (no spaces or special characters)`)\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  async function registerForPushNotificationsAsync() {\r\n      const { status: existingStatus } = await Notifications.getPermissionsAsync();\r\n      let finalStatus = existingStatus;\r\n      if (existingStatus !== 'granted') {\r\n        const { status } = await Notifications.requestPermissionsAsync();\r\n        finalStatus = status;\r\n      }\r\n      if (finalStatus !== 'granted') {\r\n        alert('Failed to get push token for push notification!');\r\n        return;\r\n      }\r\n      const token = (await Notifications.getExpoPushTokenAsync()).data;\r\n      console.log(token);\r\n      firebase.firestore().collection('Users').doc(currentUserUid).set({\r\n        'Push Tokens': firebase.firestore.FieldValue.arrayUnion(token)\r\n      }, { merge: true })\r\n\r\n\r\n    if (Platform.OS === 'android') {\r\n      Notifications.setNotificationChannelAsync('default', {\r\n        name: 'default',\r\n        importance: Notifications.AndroidImportance.MAX,\r\n        vibrationPattern: [0, 250, 250, 250],\r\n        lightColor: '#FF00007C',\r\n      });\r\n    }\r\n  };\r\n\r\n  async function setNotificationCategories() {\r\n    await Notifications.setNotificationCategoryAsync(\"standard\",[\r\n      {\r\n        identifier:\"deleteNotif\", \r\n        buttonTitle: \"Delete\",\r\n        options: {\r\n          opensAppToForeground:false,\r\n          isAuthenticationRequired:true,\r\n          isDestructive:true\r\n        }\r\n      }\r\n    ],{previewPlaceholder:\"NotiBot Notification\"})\r\n    await Notifications.setNotificationCategoryAsync(\"webhookbutton\",[\r\n      {\r\n        identifier:\"webhookAction\", \r\n        buttonTitle: \"Trigger Webhook Action\",\r\n        options: {\r\n          opensAppToForeground:true,\r\n          isAuthenticationRequired:true,\r\n          isDestructive:false\r\n        }\r\n      },\r\n      {\r\n        identifier:\"deleteNotif\", \r\n        buttonTitle: \"Delete\",\r\n        options: {\r\n          opensAppToForeground:true,\r\n          isAuthenticationRequired:true,\r\n          isDestructive:true\r\n        }\r\n      }\r\n    ],{previewPlaceholder:\"NotiBot Notification With Webhook Action\"})\r\n    await Notifications.setNotificationCategoryAsync(\"webhooktext\",[\r\n      {\r\n        identifier:\"webhookReply\", \r\n        buttonTitle: \"Send Text to Webhook\",\r\n        textInput:{\r\n          submitButtonTitle:\"SEND\",\r\n          placeholder:\"\"\r\n        },\r\n        options: {\r\n          opensAppToForeground:true,\r\n          isAuthenticationRequired:true,\r\n          isDestructive:false\r\n        }\r\n      },\r\n      {\r\n        identifier:\"deleteNotif\", \r\n        buttonTitle: \"Delete\",\r\n        options: {\r\n          opensAppToForeground:true,\r\n          isAuthenticationRequired:true,\r\n          isDestructive:true\r\n        }\r\n      }\r\n    ],{previewPlaceholder:\"NotiBot Notification With Webhook Reply\"})\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if (Constants.isDevice && Platform.OS !== 'web') { //Expo's support for web push is \"pending\"\r\n     registerForPushNotificationsAsync().then(setNotificationCategories)\r\n    }\r\n      \r\n  }, [true])\r\n\r\n  const getTimeStamp = (item) => projectsData[item].Notifications && projectsData[item].Notifications.length > 0 ? projectsData[item].Notifications[projectsData[item].Notifications.length - 1].timestamp : 0\r\n\r\n  React.useLayoutEffect(()=>{\r\n    const parsedDeepLink = initialDeepLink?.substring(prefix.length-1)\r\n    if(parsedDeepLink && parsedDeepLink.length>1 && parsedDeepLink[0]=='/') {\r\n      // Moved to a separate effect so it wont get triggers everytime projects changes\r\n      // linkTo(parsedDeepLink)\r\n    }else if(numberOfProjects == projects.length && !mainStackLoadedRef.current.queue) { // projects have finished downloading\r\n      if(projects.length>0){\r\n        console.log(\"opening most recent project!\")\r\n        navigation.navigate(\"Project\", { title: projects[0] })\r\n      }\r\n      navigation.openDrawer()\r\n    }\r\n    mainStackLoadedRef.current.mainStackLoaded()\r\n  },[projects, numberOfProjects])\r\n\r\n  React.useEffect(()=>{ // handle deep links\r\n    const parsedDeepLink = initialDeepLink?.substring(prefix.length-1)\r\n    if(parsedDeepLink && parsedDeepLink.length>1 && parsedDeepLink[0]=='/')\r\n      linkTo(encodeURI(parsedDeepLink))\r\n  },[true])\r\n\r\n  React.useLayoutEffect(() => {\r\n    const subscriptionFunctions = []\r\n    const unsub = firebase.firestore().collection('Users').doc(currentUserUid).onSnapshot({\r\n      includeMetadataChanges: true\r\n    }, (doc) => {\r\n      const source = doc.metadata.hasPendingWrites ? \"Local\" : \"Server\";\r\n      if (source == \"Server\") {\r\n        let data = (doc.data() && doc.data()[\"Projects\"]) ? doc.data()[\"Projects\"] : []\r\n        console.log(doc.data());\r\n        console.log(\"Current data: \" + data);\r\n        for (let projectName of data) {\r\n          if (!projects.includes(projectName)) {\r\n            const subFunc = (data) => {\r\n              setProjects(projects => {\r\n                if (projects.indexOf(projectName) == -1) {\r\n                  projects = [projectName, ...projects]\r\n                  console.log(`adding project to array: ${projectName}`)\r\n                }else if(!data){\r\n                  projects = projects.filter(project=>project!=projectName)\r\n                }\r\n                projects.sort((a, b) => getTimeStamp(b) - getTimeStamp(a))\r\n                setLoading(false)\r\n                console.log(projects)\r\n                return projects\r\n              })\r\n\r\n            }\r\n            listenToProject(projectName, subFunc, true)\r\n            subscriptionFunctions.push({ projectName, subFunc })\r\n          }\r\n        }\r\n        setNumberOfProjects(data.length)\r\n        if (data.length == 0) {\r\n          setLoading(false)\r\n        }\r\n      }\r\n    });\r\n    return () => {\r\n      for (let { projectName, subFunc } of subscriptionFunctions)\r\n        stopListeningToProject(projectName, subFunc)\r\n      unsub()\r\n    }\r\n  }, []);\r\n\r\n  const toggleOverlay = () => {\r\n    resetModalState()\r\n    setVisible(!visible);\r\n  };\r\n\r\n  //console.log(`projectsData: ${JSON.stringify(projectsData)}`)\r\n  return (\r\n    <>\r\n      <Overlay isVisible={visible} onBackdropPress={toggleOverlay} ModalComponent={Platform.OS === 'web' ? WebModal : Modal} overlayStyle={[Platform.OS != 'web' ? { width: \"80%\", margin: \"30%\", maxWidth: 400 /*,flexGrow:1,flex:1,*/ } : {}, { backgroundColor: \"red\", borderRadius: 10, bottom: \"20%\" }]}>\r\n        <View>\r\n          <View style={styles.textInputBox}>\r\n            <TextInput\r\n              placeholder=\"Project Name\"\r\n              placeholderTextColor=\"white\"\r\n              autoCapitalize=\"none\"\r\n              style={styles.textInput}\r\n              onChangeText={setProjectName}\r\n              value={projectName}\r\n            />\r\n          </View>\r\n          {errorMessage != '' &&\r\n            <Text style={styles.errorMessage}>\r\n              {errorMessage}\r\n            </Text>}\r\n          <Button\r\n            title=\"Create Project\"\r\n            onPress={createNewProject}\r\n          />\r\n        </View>\r\n      </Overlay>\r\n      <Header\r\n        backgroundColor=\"red\"\r\n        leftComponent={{ icon: 'plus', type: 'ant-design', color: 'white', onPress: toggleOverlay, size: 23 }}\r\n        centerComponent={{ text: 'Projects', style: { color: 'white', fontSize: 18, fontWeight: \"bold\" } }}\r\n        rightComponent={{ icon: \"settings\", type: 'feather', color: 'white', onPress: () => navigation.navigate('Settings'), size: 23 }}\r\n      />\r\n      <LinearGradient colors={[\"#ff000000\", \"red\"]} start={{ x: 0, y: .6 }} end={{ x: 0, y: 0 }} style={styles.container}>\r\n        {loading && <ActivityIndicator size=\"large\" />}\r\n        {!loading && <FlatList\r\n          style={{ height: \"100%\", width: \"100%\" }}\r\n          data={projects}\r\n          renderItem={({ item }) => {\r\n            console.log(`item: ${item}`)\r\n            // console.log(projectsData)\r\n            // console.log(projectsData[item])\r\n            if (!projectsData[item]) {\r\n              console.warn(`Trying to render a project that doesn't exist item: ${item}`)\r\n              return null\r\n            }\r\n            return (<ListItem style={{ borderRadius: 20, marginVertical: 5 }} bottomDivider topDivider onPress={() => {\r\n              // navigation.closeDrawer()\r\n              navigation.navigate(\"Project\", { title: item })\r\n            }}\r\n              linearGradientProps={{\r\n                colors: hashStringToColor(item),\r\n                start: { x: 1, y: 0 },\r\n                end: { x: 0, y: 0 },\r\n              }}\r\n              ViewComponent={LinearGradient}\r\n              containerStyle={{ borderRadius: 20 }}\r\n              >\r\n              <Avatar size=\"large\" rounded title={item.substring(0, 2)} />\r\n              <ListItem.Content>\r\n                <ListItem.Title style={styles.listItemTitle}>{item}</ListItem.Title>\r\n                <ListItem.Subtitle style={styles.listItemSubtitle}>{projectsData[item].Notifications && projectsData[item].Notifications.length > 0 ? projectsData[item].Notifications[projectsData[item].Notifications.length - 1].title : `No notifications yet!`}</ListItem.Subtitle>\r\n              </ListItem.Content>\r\n              <ListItem.Chevron />\r\n            </ListItem>)\r\n          }}\r\n          keyExtractor={item => item}\r\n          ListEmptyComponent={<View style={{ flex: 1, flexGrow: 1, justifyContent: 'center', alignItems: 'center', padding: 20 }}><Text>You currently have no projects</Text><Button style={{ marginTop: 10 }} title=\"Create a new project\" onPress={toggleOverlay} /></View>}\r\n        />}\r\n      </LinearGradient>\r\n    </>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: \"center\",\r\n    paddingTop: 5,\r\n    paddingHorizontal: 5,\r\n  },\r\n  textInputBox: {\r\n    borderBottomColor: \"white\",\r\n    borderBottomWidth: 1,\r\n    marginBottom: 20,\r\n    alignSelf: 'stretch',\r\n  },\r\n  textInput: {\r\n    fontSize: 24,\r\n    height: 40,\r\n    fontWeight: '200',\r\n    marginBottom: 0,\r\n    color: \"white\",\r\n    textAlign: 'center'\r\n  },\r\n  errorMessage: {\r\n    color: 'blue', marginBottom: 20\r\n  },\r\n  listItemTitle: {\r\n    fontSize: 30,\r\n    fontWeight: \"bold\"\r\n  },\r\n  listItemSubtitle: {\r\n    //fontSize:20\r\n  }\r\n})","import React from 'react'\r\nimport { StyleSheet, Platform, Image, Text, View, FlatList, ActivityIndicator, Button} from 'react-native'\r\nimport { ListItem } from 'react-native-elements'\r\nimport firebase from 'firebase';\r\nimport '@firebase/firestore';\r\nimport { Notifications } from 'expo';\r\n\r\nexport default function Settings({navigation}) {\r\n  function signOut(){\r\n    firebase.auth().signOut().then(/*()=>navigation.navigate('Loading')*/).catch((error) => console.error('Sign Out Error', error))\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Button title=\"Sign Out\" onPress={signOut}/>\r\n    </View>\r\n  )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n  }\r\n})","import React, {useContext, useState} from 'react'\r\nimport { StyleSheet, Platform, Image, Text, View, FlatList, ActivityIndicator, Modal, SafeAreaView, TextInput, KeyboardAvoidingView, ScrollView, useWindowDimensions } from 'react-native'\r\nimport { ListItem, Button, Overlay, Avatar } from 'react-native-elements'\r\nimport WebModal from 'modal-react-native-web';\r\nimport * as Linking from 'expo-linking';\r\nimport { useLinkTo  } from '@react-navigation/native';\r\n\r\nimport { ProjectsContext, DeepLinkContext } from '../utils/contexts'\r\nimport { Alert } from 'react-native';\r\nimport Loading from './Loading';\r\nconst prefix = Linking.createURL('/');\r\n\r\nexport default function Project({ navigation, route }){\r\n    const {projectsData, listenToProject, stopListeningToProject} = useContext(ProjectsContext);\r\n    const projTitle = route.params?.title\r\n    const [notifications,updateNotifications] = useState(projectsData?.[projTitle]?.Notifications) //projectsData[projTitle] is guaranteed to exist due to previous screen\r\n    const dimensions = useWindowDimensions();\r\n    const isLargeScreen = dimensions.width >= 768;\r\n    \r\n    React.useEffect(()=>{\r\n      if(projTitle){\r\n        //updateNotifications(projectsData[projTitle].Notifications)\r\n        const handleProjUpdate = (newData)=>{\r\n          if(newData)\r\n            updateNotifications(newData.Notifications)\r\n          else\r\n            // navigation.goBack()\r\n            navigation.openDrawer()\r\n        }\r\n        listenToProject(projTitle,handleProjUpdate, true)\r\n        return ()=>stopListeningToProject(projTitle, handleProjUpdate)\r\n      }\r\n    },[projTitle])\r\n\r\n    // React.useEffect(()=>{\r\n    //   if(!projTitle)\r\n    //   navigation.openDrawer()\r\n    // },[navigation, projTitle])\r\n\r\n    React.useLayoutEffect(() => {\r\n          navigation.setOptions({...(projTitle?{\r\n            title: projTitle,\r\n            headerRight: () => (\r\n              <Button\r\n                icon={{\r\n                  name: \"ios-options-outline\",\r\n                  type:'ionicon',\r\n                  size: 25,\r\n                  color: \"white\"\r\n                }}\r\n                type=\"clear\"\r\n                onPress={()=>navigation.navigate(\"ProjectOptions\",{title:projTitle})}\r\n              />\r\n            ),\r\n          }:{title:\"\"}),\r\n          headerLeft:()=>{\r\n            if(isLargeScreen)\r\n              return null\r\n            return(\r\n              <Button\r\n                icon={{\r\n                  name: \"menu\",\r\n                  type:'entypo',\r\n                  size: 25,\r\n                  color: \"white\"\r\n                }}\r\n                type=\"clear\"\r\n                onPress={()=>navigation.openDrawer()}\r\n              />\r\n            )\r\n          }\r\n        });\r\n    }, [navigation, projTitle]);\r\n\r\n\r\n    // console.log(`projectsData: ${JSON.stringify(projectsData)}`)\r\n\r\n    const getSubtitle = (item) =>{\r\n        if(item.subtitle)\r\n            return item.subtitle\r\n        if(item.body)\r\n            return item.body\r\n        return null\r\n    }\r\n\r\n\r\n    if(!projTitle){\r\n      // if(!isLargeScreen){\r\n      //   navigation.openDrawer()\r\n      //   return(<Loading/>)\r\n      // }\r\n      return(<View style={styles.container}>\r\n        <Text style={{fontSize:15, textAlign:\"center\"}}>Select a project</Text>\r\n      </View>)\r\n    }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <FlatList\r\n            style={{height:\"100%\",width:\"100%\"}}\r\n            data={notifications?[...notifications].reverse():[]}\r\n            renderItem={({ item, index }) => <ListItem style={styles.listItem} bottomDivider topDivider onPress={\r\n              ()=>navigation.navigate(\"Notification\",{index: (notifications.length-1-index), timestamp: item.timestamp, projTitle})\r\n            }>\r\n                <ListItem.Content>\r\n                <ListItem.Title>{item.title.substring(0,30)}</ListItem.Title>\r\n                <ListItem.Subtitle>{getSubtitle(item).substring(0,40)}</ListItem.Subtitle>\r\n                <ListItem.Subtitle left>{new Date(item.timestamp).toLocaleString()}</ListItem.Subtitle>\r\n                </ListItem.Content>\r\n                <ListItem.Chevron/>\r\n            </ListItem>}\r\n            keyExtractor={item => item.title+item.timestamp}\r\n            ListEmptyComponent = {\r\n              <View style={{flex:1,flexGrow:1,height:\"100%\",justifyContent: 'center',alignItems: 'center', padding:20 }}>\r\n                <Text style={{fontSize:15, textAlign:\"center\"}}>The project currently has no notifications</Text>\r\n              </View>\r\n            }\r\n            />\r\n        </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: \"center\"\r\n  }\r\n})","export const groups = [\"Owner\", \"Manager\", \"Subscriber\"]","import React from 'react'\r\nimport { StyleSheet, Platform, Image, ScrollView, FlatList, ActivityIndicator, Modal, SafeAreaView, TextInput, View, TouchableOpacity } from 'react-native'\r\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view'\r\nimport { ListItem, Button, Overlay, Avatar, Text } from 'react-native-elements'\r\nimport WebModal from 'modal-react-native-web';\r\nimport firebase from 'firebase';\r\nimport JSONTree from 'react-native-json-tree'\r\nimport Loading from './Loading'\r\n\r\nimport { ProjectsContext } from '../utils/contexts'\r\nimport { groups } from '../utils/constants'\r\n\r\nexport default function Notification({ navigation, route }){\r\n    const {projectsData, listenToProject, stopListeningToProject} = React.useContext(ProjectsContext);\r\n    const { index, timestamp, projTitle, resValue } = route.params\r\n    const [notification,updateNotification] = React.useState(projectsData?.[projTitle]?.Notifications?.[index]) //projectsData[projTitle].Notifications[index] is guaranteed to exist due to previous screen\r\n    const [webhookParamValue,setWebhookParamValue] = React.useState('')\r\n    const [webhookRes,setWebhookRes] = React.useState(resValue?resValue:'')\r\n\r\n    const checkCanDelete = () =>{\r\n        const currentUserUid = firebase.auth().currentUser.uid;\r\n        for(let index of [0,1])\r\n            if(projectsData?.[projTitle]?.[groups[index]]?.includes(currentUserUid))\r\n                return true\r\n        return false\r\n    }\r\n\r\n    const [canDelete,setCanDelete] = React.useState(checkCanDelete())\r\n\r\n    const db = firebase.firestore();\r\n\r\n    React.useLayoutEffect(()=>{\r\n        // Handle populating the previous state if the notification was opened with deep linking\r\n        const oldState = navigation.dangerouslyGetState()\r\n        console.log(\"oldState\")\r\n        console.log(JSON.stringify(oldState))\r\n        const {routes, index} = oldState\r\n        const prevRoute = routes?.[routes.length-2]\r\n        if(prevRoute?.name == \"Project\") // ensure that the correct screen came before\r\n            if(!prevRoute.params){ // only manually set params if they don't exist\r\n                prevRoute.params = {title: projTitle}\r\n                console.log(\"oldState\")\r\n                console.log(JSON.stringify(oldState))\r\n                navigation.reset({index, routes})\r\n            }\r\n    },[navigation])\r\n\r\n    React.useEffect(()=>{\r\n        const handleProjUpdate = (newData)=>{\r\n            if(newData && newData.Notifications){\r\n                let newIndex = /*index?index:*/newData.Notifications.length\r\n                while(newIndex>-1 && (!newData.Notifications[newIndex] || newData.Notifications[newIndex].timestamp > timestamp))\r\n                    newIndex--\r\n                if(newData.Notifications[newIndex] && newData.Notifications[newIndex].timestamp == timestamp){\r\n                    setCanDelete(checkCanDelete())\r\n                    updateNotification(newData.Notifications[newIndex])\r\n                    navigation.setParams({index: newIndex})\r\n                }else\r\n                    navigation.goBack()\r\n            }else\r\n                navigation.goBack()\r\n        }\r\n        listenToProject(projTitle,handleProjUpdate, true)\r\n        return ()=>stopListeningToProject(projTitle, handleProjUpdate)\r\n    },[projTitle,timestamp])\r\n\r\n    const deleteNotification=async ()=>{\r\n        await db.collection('Projects').doc(projTitle).set({\r\n            'Notifications':firebase.firestore.FieldValue.arrayRemove(notification)\r\n        }, { merge: true })\r\n    }\r\n\r\n    React.useLayoutEffect(() => {\r\n        navigation.setOptions({\r\n            title: notification?.title,\r\n            headerRight: () => canDelete\r\n                && <Button\r\n                    disabled={!canDelete}\r\n                    icon={{\r\n                        name: \"trash-outline\",\r\n                        type:'ionicon',\r\n                        size: 25,\r\n                        color: \"white\"\r\n                    }}\r\n                    type=\"clear\"\r\n                    titleStyle={styles.headerButtonTitle}\r\n                    onPress={deleteNotification}\r\n                />\r\n            ,\r\n        });\r\n    }, [navigation, canDelete, notification]);\r\n\r\n    const makeRequest = () => {\r\n        const url = notification.webhook+webhookParamValue\r\n        fetch(url).then(res=>res.text()).then(setWebhookRes).catch(e=>setWebhookRes(e.toString()))\r\n    }\r\n\r\n    if(!notification)\r\n        return(<Loading/>)\r\n\r\n    return (\r\n        <KeyboardAwareScrollView>\r\n            <ScrollView /*contentContainerStyle={styles.container}*/>\r\n                <SafeAreaView>\r\n                    <View style={styles.headerView}>\r\n                        <Text h1>{notification.title}</Text>\r\n                    </View>\r\n                    <View style={{alignItems: \"center\"}}>\r\n                        <View style={styles.subheaderView}>\r\n                            {notification.subtitle&&<Text style={styles.textMargin} h4 left>{notification.subtitle}</Text>}{notification.timestamp && <Text style={styles.textMargin} right>{`${new Date(notification.timestamp).toLocaleString()}\\nEpoch: ${notification.timestamp}`}</Text>}\r\n                        </View>\r\n                    </View>\r\n                    <View style={styles.dataView}>\r\n                        <Text style={styles.textMargin}>{notification.body}</Text>\r\n                        {notification.webhook && <Text style={styles.textMargin}>Webhook: {notification.webhook}</Text>}\r\n                    </View>\r\n                    {notification.webhook && <View style={{alignItems: \"center\"}}>\r\n                        {notification.webhookParam && \r\n                        <View style={styles.textInputBox}>\r\n                            <TextInput\r\n                                placeholder=\"URL parameter value\"\r\n                                autoCapitalize=\"none\"\r\n                                style={styles.textInput}\r\n                                onChangeText={setWebhookParamValue}\r\n                                value={webhookParamValue}\r\n                            />\r\n                        </View>}\r\n                        <TouchableOpacity \r\n                            style={[styles.submitButton,{backgroundColor:\"green\"}]}\r\n                            onPress={makeRequest}\r\n                        >\r\n                            <Text style={{color:\"white\",fontSize:20,}}>Call {notification.webhook+webhookParamValue} {webhookRes && \"Again\"}</Text>\r\n                        </TouchableOpacity>\r\n                    </View>}\r\n                    <View style={styles.dataView}>\r\n                        {!!webhookRes && <Text style={styles.textMargin}>Response: {webhookRes}</Text>}\r\n                    </View>\r\n                </SafeAreaView>\r\n            </ScrollView>\r\n        </KeyboardAwareScrollView>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    //justifyContent: 'center',\r\n  },\r\n  headerView:{\r\n    alignItems: \"center\",\r\n  },\r\n  subheaderView: {\r\n    flex: 1,\r\n    flexDirection:'row',\r\n    justifyContent: 'space-between'\r\n  },\r\n  textMargin:{\r\n      margin:10,\r\n  },\r\n  headerButtonTitle:{\r\n      color:'white'\r\n  },\r\n  dataView:{\r\n      flex:1,\r\n      flexDirection:'column',\r\n      justifyContent:\"flex-start\"\r\n  },\r\n  textInputBox: {\r\n    borderBottomColor:\"black\",\r\n    borderBottomWidth: 1,\r\n    margin:10,\r\n    marginBottom: 40,\r\n    alignSelf: 'stretch',\r\n  },\r\n  textInput: {\r\n    fontSize: 24,\r\n    height: 40,\r\n    fontWeight: '200',\r\n    marginBottom: 0,\r\n    color:\"black\",\r\n  },\r\n  submitButton:{\r\n    alignItems: 'center',\r\n    padding:15,\r\n    borderRadius:7,\r\n    marginBottom:10,\r\n    margin:7,\r\n    alignSelf: 'stretch',\r\n  },\r\n})","import React from 'react'\r\nimport { StyleSheet, Platform, Image, Text, View, FlatList, ActivityIndicator, Modal, SafeAreaView, TextInput, KeyboardAvoidingView, ScrollView, Alert } from 'react-native'\r\nimport { ListItem, Button, Overlay, Avatar, Icon } from 'react-native-elements'\r\nimport WebModal from 'modal-react-native-web';\r\nimport DropDownPicker from 'react-native-dropdown-picker';\r\nimport firebase from 'firebase';\r\nimport { ProjectsContext } from '../utils/contexts'\r\nimport { groups } from '../utils/constants'\r\n\r\nconst groupDescriptions = [\"Full Access\", \"Can't delete project or edit team members\", \"Can only view data, can't delete notifications\"]\r\n\r\nexport default function Home({ navigation, route }) {\r\n    const { projectsData, listenToProject, stopListeningToProject } = React.useContext(ProjectsContext);\r\n    const projTitle = route.params.title\r\n    const [users, setUsers] = React.useState([])\r\n    const [currentGroupNum, setCurrentGroupNum] = React.useState(groups.length)\r\n    const [canLeave, setCanLeave] = React.useState(false)\r\n    const [visible, setVisible] = React.useState(false);\r\n    const [email, setEmail] = React.useState('');\r\n    const [errorMessage, setErrorMessage] = React.useState('');\r\n    const profileInfoMap = React.useRef({});\r\n\r\n    const db = firebase.firestore();\r\n\r\n    const projectInfo = projectsData[projTitle]\r\n\r\n    const currentUserUid = firebase.auth().currentUser.uid;\r\n\r\n    React.useLayoutEffect(() => {\r\n        const handleProjUpdate = (newData) => {\r\n            console.log(\"triggered\")\r\n            if (newData) {\r\n                let tempUsers = []\r\n                for (let groupName of groups){\r\n                    console.log(groupName)\r\n                    if (newData[groupName])\r\n                        for (let uid of newData[groupName]) {\r\n                            console.log(uid)\r\n                            if (uid == currentUserUid)\r\n                                setCurrentGroupNum(groups.indexOf(groupName))\r\n                            if (!profileInfoMap.current[uid])\r\n                                fetch(\"https://notibot-server.herokuapp.com/getProfileInfo\", { body: JSON.stringify({ uid }), method: 'POST', headers: { \"Content-Type\": \"application/json\" } }).then((res) => res.json()).then((profile) => {\r\n                                    profileInfoMap.current[uid] = profile\r\n                                    //console.log(profile)\r\n                                    setUsers((users)=>[...users, { group: groupName, profile: profileInfoMap.current[uid] }])\r\n                                })\r\n                            else {\r\n                                tempUsers.push({ group: groupName, profile: profileInfoMap.current[uid] }) // Don't re-render until finished\r\n                            }\r\n                        }\r\n                }\r\n                if (tempUsers.length > 0)\r\n                    setUsers(tempUsers)\r\n                if (currentGroupNum == 0 && newData[groups[0]].length == 1)\r\n                    setCanLeave(false)\r\n                else\r\n                    setCanLeave(true)\r\n            } else\r\n                navigation.goBack()\r\n        }\r\n        listenToProject(projTitle, handleProjUpdate, true)\r\n        return () => stopListeningToProject(projTitle, handleProjUpdate)\r\n    }, [])\r\n\r\n\r\n    React.useLayoutEffect(() => {\r\n        navigation.setOptions({\r\n            title: `${projTitle} Options`,\r\n        });\r\n    }, [navigation]);\r\n\r\n    const resetModalState = () => {\r\n        setEmail('')\r\n        setErrorMessage('')\r\n    }\r\n\r\n    const toggleOverlay = () => {\r\n        resetModalState()\r\n        setVisible(!visible);\r\n    };\r\n\r\n    const deleteProject = () => {\r\n        Alert.alert(`Delete ${projTitle}`, `Are you sure you want to delete ${projTitle}?`,\r\n            [{\r\n                text: 'Delete',\r\n                onPress: async () => {\r\n                    firebase.auth().currentUser.getIdToken(true)\r\n                        .then((idToken) => fetch(\"https://notibot-server.herokuapp.com/deleteProject\", { body: JSON.stringify({ idToken, project: projTitle }), method: 'POST', headers: { \"Content-Type\": \"application/json\" } }))\r\n                        .catch(e => Alert.alert(\"An error occurred while attempting to delete the project\"))\r\n                },\r\n                style: \"destructive\"\r\n            }, { text: 'Cancel', style: 'cancel' },],\r\n            { cancelable: true }\r\n        );\r\n    }\r\n\r\n    const deleteNotifications = () => {\r\n        Alert.alert(`Delete ${projTitle}`, `Are you sure you want to delete all of ${projTitle}'s notifications?`,\r\n            [{\r\n                text: 'Delete',\r\n                onPress: async () => {\r\n                    await db.collection('Projects').doc(projTitle).update({\r\n                        Notifications: firebase.firestore.FieldValue.delete()\r\n                    }).then(() => navigation.goBack()).catch(e => Alert.alert(\"An error occurred while attempting to delete the notifications\"))\r\n                },\r\n                style: \"destructive\"\r\n            }, { text: 'Cancel', style: 'cancel' },],\r\n            { cancelable: true }\r\n        );\r\n    }\r\n\r\n    const addUser = () => {\r\n        fetch(\"https://notibot-server.herokuapp.com/getProfileByEmail\", { body: JSON.stringify({ email }), method: 'POST', headers: { \"Content-Type\": \"application/json\" } })\r\n            .then((res) => res.json()).then((profile) => {\r\n                console.log(profile)\r\n                return firebase.auth().currentUser.getIdToken(true)\r\n                    .then((idToken) => fetch(\"https://notibot-server.herokuapp.com/addUserToProject\", { \r\n                        body: JSON.stringify({ idToken, project: projTitle, uid:profile.uid }), \r\n                        method: 'POST', \r\n                        headers: { \"Content-Type\": \"application/json\" } \r\n                    }))\r\n            }).then(()=>setVisible(false)).catch(e => Alert.alert(`An error occurred while attempting to add ${email} to the project`))\r\n    }\r\n\r\n    const removeUser = (email) => {\r\n        fetch(\"https://notibot-server.herokuapp.com/getProfileByEmail\", { body: JSON.stringify({ email }), method: 'POST', headers: { \"Content-Type\": \"application/json\" } })\r\n            .then((res) => res.json()).then((profile) => {\r\n                console.log(profile)\r\n                return firebase.auth().currentUser.getIdToken(true)\r\n                    .then((idToken) => fetch(\"https://notibot-server.herokuapp.com/removeUserFromProject\", { \r\n                        body: JSON.stringify({ idToken, project: projTitle, uid:profile.uid }), \r\n                        method: 'POST', \r\n                        headers: { \"Content-Type\": \"application/json\" } \r\n                    }))\r\n            }).catch(e => Alert.alert(`An error occurred while attempting to remove ${email} from the project`))\r\n    }\r\n\r\n    const leaveProject = async () => {\r\n        await db.collection('Projects').doc(projTitle).update({\r\n            [groups[currentGroupNum]]: firebase.firestore.FieldValue.arrayRemove(currentUserUid)\r\n        })\r\n        await db.collection('Users').doc(currentUserUid).update({\r\n            'Projects': firebase.firestore.FieldValue.arrayRemove(projTitle)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Overlay isVisible={visible} onBackdropPress={toggleOverlay} ModalComponent={Platform.OS === 'web' ? WebModal : Modal} overlayStyle={[Platform.OS != 'web' ? { width: \"80%\", margin: \"30%\", maxWidth: 400 /*,flexGrow:1,flex:1,*/ } : {}, { backgroundColor: \"red\", borderRadius: 10, bottom: \"20%\" }]}>\r\n                <View>\r\n                    <View style={styles.textInputBox}>\r\n                        <TextInput\r\n                            placeholder=\"Email\"\r\n                            placeholderTextColor=\"white\"\r\n                            autoCapitalize=\"none\"\r\n                            style={styles.textInput}\r\n                            onChangeText={setEmail}\r\n                            value={email}\r\n                        />\r\n                    </View>\r\n                    {errorMessage != '' &&\r\n                        <Text style={styles.errorMessage}>\r\n                            {errorMessage}\r\n                        </Text>}\r\n                    <Button\r\n                        title=\"Add User\"\r\n                        onPress={addUser}\r\n                    />\r\n                </View>\r\n            </Overlay>\r\n            <ScrollView contentContainerStyle={styles.container}>\r\n                <View style={{width:\"100%\"}}>\r\n                    {(() => {\r\n                        let userElements = []\r\n                        for(let itemIndex in users){\r\n                            let item = users[itemIndex]\r\n                            let controller\r\n                            userElements.push(<ListItem key={item.profile.email} style={[styles.listItem, {zIndex: -1*itemIndex}]} bottomDivider topDivider>\r\n                                <Avatar source={{ uri: item.profile.photoURL }} title={item.profile.email.substring(0,2)} rounded />\r\n                                <ListItem.Content>\r\n                                    <ListItem.Title>{item.profile.displayName}</ListItem.Title>\r\n                                    <ListItem.Subtitle adjustsFontSizeToFit numberOfLines={1}>{item.profile.email}</ListItem.Subtitle>\r\n                                </ListItem.Content>\r\n                                <DropDownPicker disabled={currentGroupNum > 0 || (currentUserUid == item.profile.uid && !canLeave)} items={[...groups, \"Remove\"].map(el => ({ label: el, value: el }))} defaultValue={item.group} containerStyle={{ flexGrow: .5 }} itemStyle={{overflow: \"visible\"}} controller={instance => controller = instance} onChangeItem={(el)=>{\r\n                                    const {value:newValue} = el\r\n                                    console.log(newValue)\r\n                                    if(newValue == \"Remove\"){\r\n                                        Alert.alert(`Remove ${item.profile.email}`, `Are you sure you want remove ${item.profile.email} from this project?`,\r\n                                            [{\r\n                                                text: 'Remove',\r\n                                                onPress: async () => {\r\n                                                    removeUser(item.profile.email)\r\n                                                },\r\n                                                style: \"destructive\"\r\n                                            }, \r\n                                            { text: 'Cancel', style: 'cancel',\r\n                                                onPress: ()=>{\r\n                                                    controller.selectItem(item.group)\r\n                                                }\r\n                                            }],\r\n                                            { cancelable: true, onDismiss:()=>{\r\n                                                controller.selectItem(item.group)\r\n                                            }}\r\n                                        );\r\n                                    }else{\r\n                                        const updateObj = {}\r\n                                        groups.forEach(el => { updateObj[el] = firebase.firestore.FieldValue.arrayRemove(item.profile.uid) })\r\n                                        updateObj[newValue] = firebase.firestore.FieldValue.arrayUnion(item.profile.uid)\r\n                                        db.collection('Projects').doc(projTitle).update(updateObj)\r\n                                    }\r\n                                }}/>\r\n                            </ListItem>)\r\n                        }\r\n                        if(userElements.length==0){\r\n                            return <ActivityIndicator size=\"large\" style={{padding:10}}/>\r\n                        }\r\n                        return userElements\r\n                    })()}\r\n                </View>\r\n                {/* <FlatList\r\n                    style={{ width: \"100%\", maxHeight: \"60%\" }}\r\n                    data={users}\r\n                    renderItem={({ item, index }) => {\r\n                        //console.log(item)\r\n                        return (<View style={{zIndex:-999999*index}}><ListItem style={styles.listItem} bottomDivider topDivider>\r\n                            <Avatar source={{ uri: item.profile.photoURL }} rounded />\r\n                            <ListItem.Content>\r\n                                <ListItem.Title>{item.profile.displayName}</ListItem.Title>\r\n                                <ListItem.Subtitle adjustsFontSizeToFit numberOfLines={1}>{item.profile.email}</ListItem.Subtitle>\r\n                            </ListItem.Content>\r\n                            <DropDownPicker disabled={currentGroupNum < 0} items={groups.map(el => ({ label: el, value: el }))} defaultValue={item.group} containerStyle={{ flexGrow: .5 }} style={{zIndex:999999*index}}/>\r\n                        </ListItem></View>)\r\n                    }}\r\n                    keyExtractor={item => item.profile.uid}\r\n                    ListEmptyComponent={<View style={{ flex: 1, flexGrow: 1, justifyContent: 'center', alignItems: 'center', padding: 20 }}><ActivityIndicator size=\"large\" /><Text>Populating with members...</Text></View>}\r\n                /> */}\r\n                <ListItem style={[{ zIndex: -9 }, styles.listItem]} bottomDivider topDivider disabled={currentGroupNum > 0} onPress={toggleOverlay}>\r\n                    <Icon name='plus' type='ant-design' color='blue' />\r\n                    <ListItem.Content>\r\n                        <ListItem.Title>Add User</ListItem.Title>\r\n                    </ListItem.Content>\r\n                </ListItem>\r\n                {(() => {\r\n                    const arr = []\r\n                    for (let groupIndex in groups) {\r\n                        // console.log(`${groupIndex} - ${currentGroupNum}`)\r\n                        arr.push(<View key={groupIndex} style={[styles.listItem, styles.descContainer]}>\r\n                            <Text style={[groupIndex == currentGroupNum ? { color: 'blue' } : {}, styles.groupTitle, styles.groupText]}>{groups[groupIndex]}</Text>\r\n                            <Text style={[styles.groupDesc, styles.groupText]}>{groupDescriptions[groupIndex]}</Text>\r\n                        </View>)\r\n                    }\r\n                    return arr\r\n                })()}\r\n                <Button\r\n                    disabled={currentGroupNum > 1}\r\n                    containerStyle={{ marginTop: 20, }}\r\n                    title=\"Delete Notifications\"\r\n                    buttonStyle={styles.deleteButton}\r\n                    onPress={deleteNotifications}\r\n                />\r\n                <Button\r\n                    disabled={!canLeave}\r\n                    containerStyle={{ marginTop: 20, }}\r\n                    title={`Leave Project`}\r\n                    buttonStyle={styles.leaveButton}\r\n                    onPress={leaveProject}\r\n                />\r\n                {!canLeave && <Text style={styles.explanationText}>You are the only owner, you can't leave until appointing a new owner</Text>}\r\n                <Button\r\n                    disabled={currentGroupNum > 0}\r\n                    containerStyle={{ marginTop: 20, }}\r\n                    title=\"Delete Project\"\r\n                    buttonStyle={styles.deleteButton}\r\n                    onPress={deleteProject}\r\n                />\r\n            </ScrollView>\r\n        </>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        //flex: 1,\r\n        // justifyContent: 'center',\r\n        paddingBottom:20,\r\n        alignItems: \"center\"\r\n    },\r\n    deleteButton: {\r\n        backgroundColor: \"red\"\r\n    },\r\n    leaveButton: {\r\n        backgroundColor: \"blue\"\r\n    },\r\n    listItem: {\r\n        width: \"100%\",\r\n        //zIndex:-1\r\n    },\r\n    descContainer: {\r\n        flexGrow: 1,\r\n        flexDirection: \"row\",\r\n        padding: 10,\r\n        zIndex: -99\r\n    },\r\n    groupTitle: {\r\n        marginRight: 10,\r\n        flexBasis: 100,\r\n    },\r\n    groupText: {\r\n        fontSize: 15,\r\n    },\r\n    groupDesc: {\r\n        flexShrink: 1,\r\n        flexWrap: 'wrap'\r\n    },\r\n    explanationText: {\r\n        textAlign: \"center\",\r\n        marginHorizontal: 20\r\n    },\r\n    textInputBox: {\r\n        borderBottomColor: \"white\",\r\n        borderBottomWidth: 1,\r\n        marginBottom: 20,\r\n        alignSelf: 'stretch',\r\n    },\r\n    textInput: {\r\n        fontSize: 24,\r\n        height: 40,\r\n        fontWeight: '200',\r\n        marginBottom: 0,\r\n        color: \"white\",\r\n        textAlign: 'center'\r\n    }\r\n})","import React, {useEffect, useRef} from 'react';\nimport { Button, Text, TextInput, View, useWindowDimensions, Dimensions, Platform, Alert } from 'react-native';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { createDrawerNavigator,   DrawerContentScrollView,  DrawerItemList, } from '@react-navigation/drawer';\nimport { ProjectsContext, DeepLinkContext, MainStackLoadedContext } from './utils/contexts'\nimport FlashMessage from \"react-native-flash-message\";\nimport { showMessage, hideMessage } from \"react-native-flash-message\";\nimport * as Linking from 'expo-linking';\nimport { useLinkTo  } from '@react-navigation/native';\nimport Constants from 'expo-constants';\nimport useRootNavigation from './utils/useRootNavigation'\n\nimport Loading from './screens/Loading'\nimport Login from './screens/Login'\nimport SignUp from './screens/SignUp'\nimport Home from './screens/Home'\nimport Settings from './screens/Settings'\nimport Project from './screens/Project'\nimport Notification from './screens/Notification'\nimport ProjectOptions from './screens/ProjectOptions'\n\nimport * as Notifications from 'expo-notifications'\n\n// import 'expo-firestore-offline-persistence'\nimport firebase from \"firebase\";\n// import 'firebase/firestore'\n\nvar firebaseConfig = {\n  apiKey: \"AIzaSyBc_AtukKnVqdNYRefB-NtZLy5otD8KMvA\",\n  authDomain: \"notibotapp.firebaseapp.com\",\n  databaseURL: \"https://notibotapp.firebaseio.com\",\n  projectId: \"notibotapp\",\n  storageBucket: \"notibotapp.appspot.com\",\n};\n\ntry {\n  firebase.initializeApp(firebaseConfig);\n} catch (err) {\n    // ignore app already initialized error in stack\n}\n// firebase.firestore().enablePersistence()\n\nconst Stack = createStackNavigator();\nconst Drawer = createDrawerNavigator();\nconst db = firebase.firestore();\n\nconst prefix = Linking.createURL('/');\n\nexport default function App() {\n  const projectsData = React.useRef({});\n  const userData = React.useRef({});\n  const callbacks = React.useRef({});\n  const listeners = React.useRef({});\n  const notificationListener = useRef();\n  const responseListener = useRef();\n  const mainStackLoadedRef = useRef({\n    mainStackLoaded: () =>{\n      mainStackLoadedRef.current.loaded = true\n      if(mainStackLoadedRef.current.queue)\n        mainStackLoadedRef.current.queue()\n    },\n    loaded:false,\n    queue:null\n  });\n  const [initialDeepLink, setInitialDeepLink] = React.useState(null);\n  // don't use hook on web because resizing is a common action and the site shouldn't reload on every resize\n  const dimensionWidth = Platform.OS === 'web'?Dimensions.get('window').width:useWindowDimensions().width; \n  const isLargeScreen = dimensionWidth >= 768;\n  // const linkTo = useLinkTo();\n  const navigation = useRootNavigation();\n\n  const openLinkInApp = (appUrl)=>{\n    if(mainStackLoadedRef.current.loaded)\n      navigation.linkTo(appUrl)\n    else\n      mainStackLoadedRef.current.queue = ()=> navigation.linkTo(appUrl)\n  }\n  \n  // Set up notifications\n  React.useLayoutEffect(() => {\n    // setTimeout(()=>navigation.linkTo(`Main/Projects/Notification?projTitle=testt&timestamp=1621574434297`),5*1000)\n\n    if (Constants.isDevice && Platform.OS !== 'web') { //Expo's support for web push is \"pending\"\n      notificationListener.current = Notifications.addNotificationReceivedListener(notification => {\n        const notifContent = notification.request.content\n        // console.log(notification)\n        showMessage({\n          message: notifContent.title,\n          description: notifContent.body,\n          type: \"info\",\n          hideStatusBar:true,\n          onPress: ()=>{\n            navigation.linkTo(`/Main/Projects/Notification?projTitle=${notifContent.data?.project}&timestamp=${notifContent.data?.firebaseData?.timestamp}`)\n          }\n        });\n      });\n\n      responseListener.current = Notifications.addNotificationResponseReceivedListener(async response => {\n        const notifMetaData = response.notification.request.content.data\n        if (response.actionIdentifier == \"deleteNotif\"){\n          // Alert.alert(\"delete\")\n          return db.collection('Projects').doc(notifMetaData?.project).set({\n            'Notifications':firebase.firestore.FieldValue.arrayRemove(notifMetaData?.firebaseData)\n          }, { merge: true })\n        }\n        let url = \"\"\n        if(response.actionIdentifier == \"webhookAction\"){\n          url = notifMetaData?.firebaseData?.webhook\n        }else if(response.actionIdentifier == \"webhookReply\"){\n          url = notifMetaData?.firebaseData?.webhook + response?.userText\n        }else{ // response.actionIdentifier == Notifications.DEFAULT_ACTION_IDENTIFIER\n          return openLinkInApp(encodeURI(`Main/Projects/Notification?projTitle=${notifMetaData?.project}&timestamp=${notifMetaData?.firebaseData?.timestamp}`))\n        }\n        const fetchCallback = (resStr, errored) =>{\n          showMessage({\n            message: errored?\"Webhook call failed!\":\"Webhook called!\",\n            type: errored?\"danger\":\"success\",\n            hideStatusBar:true,\n          });\n          openLinkInApp(encodeURI(`Main/Projects/Notification?projTitle=${notifMetaData?.project}&timestamp=${notifMetaData?.firebaseData?.timestamp}&resValue=${resStr}`))\n        }\n        fetch(url).then(res=>res.text())\n        .then(fetchCallback)\n        .catch((e)=>fetchCallback(e.toString(), true))\n      });\n    }\n       //else {\n      //alert('Must use physical device for Push Notifications');\n      //}\n    return () => {\n      Notifications.removeNotificationSubscription(notificationListener.current);\n      Notifications.removeNotificationSubscription(responseListener.current);\n    };\n  }, [true])\n\n  const [state, dispatch] = React.useReducer(\n    (prevState, action) => {\n      switch (action.type) {\n        case 'SIGN_IN':\n          return {\n            ...prevState,\n            isLoading: false,\n            isSignedIn: action.isSignedIn,\n          };\n        case 'SIGN_OUT':\n          return {\n            ...prevState,\n            isLoading: false,\n            isSignedIn: false,\n          };\n      }\n    },\n    {\n      isLoading: true,\n      isSignedIn: false,\n    }\n  );\n\n  React.useLayoutEffect(()=>{\n    Linking.getInitialURL().then((url) => {\n      setInitialDeepLink(url)\n    });\n  },[true])\n\n\n  React.useLayoutEffect(() => {\n    firebase.auth().onAuthStateChanged((user) => {\n      console.log(`Auth: ${!!user}`)\n      dispatch({ type: 'SIGN_IN', isSignedIn: !!user });\n    })\n  }, []);\n\n  //const projectsData = {}\n\n  const projContext = {\n    projectsData: projectsData.current,\n    listenToProject: (projectName, callback, callOnInit)=>{\n      // console.log(JSON.stringify(callbacks.current))\n      if(callbacks.current[projectName]){\n        console.log(`listener already exists for ${projectName}`)\n        callbacks.current[projectName].push(callback)\n        if(callOnInit && projectName in projectsData.current)\n          callback(projectsData.current[projectName])\n      }else{\n        console.log(`creating listener for ${projectName}`)\n        callbacks.current[projectName] = [callback]\n        listeners.current[projectName] = db.collection('Projects').doc(projectName).onSnapshot({\n          includeMetadataChanges: true\n        },(doc) => {\n          const source = doc.metadata.hasPendingWrites ? \"Local\" : \"Server\";\n          // console.log(source)\n          if(source == \"Server\"){\n            // console.log(`Snapshot: ${projectName} - ${doc.data()}`)\n            projectsData.current[projectName] = doc.data()\n            for(let invCallback of callbacks.current[projectName])\n              invCallback(doc.data())\n          }\n        },\n        error=>{\n          // console.warn(error)\n          projectsData.current[projectName] = null\n          for(let invCallback of callbacks.current[projectName])\n            invCallback(null)\n        }\n        )\n      }\n    },\n    stopListeningToProject: (projectName, callback)=>{\n      // console.log(`Stopping listener - ${projectName}:${callback}\\n${callbacks.current[projectName]}`)\n      if(!callbacks.current[projectName]){\n        console.warn(\"Listener doesn't exist. How did this happen?\")\n      }\n      const index = callbacks.current[projectName].indexOf(callback)\n      console.log(`Index of callback in array: ${index}`)\n      callbacks.current[projectName].splice(index,1)\n      if(callbacks.current[projectName].length == 0){\n        callbacks.current[projectName] = null\n        listeners.current[projectName]();\n      }\n    }\n  }\n\n  const ProjectStack = () => {\n    return (<Stack.Navigator \n      screenOptions={{\n        headerStyle: {\n          backgroundColor: 'red',\n        },\n        headerTintColor: '#fff',\n        headerTitleStyle: {\n          fontWeight: 'bold',\n        },\n      }}\n    >\n      <Stack.Screen name=\"Project\" component={Project}/>\n      <Stack.Screen name=\"ProjectOptions\" component={ProjectOptions} />\n      <Stack.Screen name=\"Notification\" component={Notification} />\n    </Stack.Navigator>)\n  }\n\n  const DrawerNav = ()=> {\n    return(<Drawer.Navigator\n      // openByDefault\n      drawerType={isLargeScreen ? 'permanent' : 'back'}\n      drawerStyle={isLargeScreen ? null : { width: '100%' }}\n      overlayColor=\"transparent\"\n      drawerContent={(props) => {\n        return (<Home {...props} />)\n      }}\n      screenOptions={{\n        gestureEnabled:true\n      }}\n    >\n      <Drawer.Screen name=\"Projects\" component={ProjectStack}/>\n    </Drawer.Navigator>)\n  }\n\n  return (<NavigationContainer ref={navigation.navigationRef} linking={{\n    prefixes: [prefix, 'http://localhost:19006', 'https://notibot.kihtrak.com'],\n    screens: {\n      ProjectsDrawerScreen:{\n        path: '',\n        screens: {\n          Projects:{\n            path: '',\n            screens: {\n              Project: 'project/:title',\n              Notification: 'notification/:projTitle/:timestamp/:resValue?/:index?',\n            }\n          }\n        },\n      },\n    },\n    subscribe(listener) {\n      const onReceiveURL = ({ url }) => {\n        listener(url)\n        console.log(`setInitialDeepLink(${url})`)\n        if(url!=initialDeepLink)\n          setInitialDeepLink(url)\n      };\n\n      // Linking.getInitialURL().then((url) => {\n      //   console.log(`setInitialDeepLinkbyutnotreally(${url})`)\n      // });\n\n      // Listen to incoming links from deep linking\n      Linking.addEventListener('url', onReceiveURL);\n\n      return () => {\n        // Clean up the event listeners\n        Linking.removeEventListener('url', onReceiveURL);\n      };\n    },\n  }}>\n    <MainStackLoadedContext.Provider value={mainStackLoadedRef}>\n      <DeepLinkContext.Provider value={initialDeepLink}>\n        <ProjectsContext.Provider value={projContext}>\n            <Stack.Navigator \n              screenOptions={{\n                headerStyle: {\n                  backgroundColor: 'red',\n                },\n                headerTintColor: '#fff',\n                headerTitleStyle: {\n                  fontWeight: 'bold',\n                },\n              }}\n            >\n              {state.isLoading ? ( \n                <Stack.Screen name=\"Splash\" component={Loading} options={{ headerShown:false }}/>\n              ) : state.isSignedIn == false ? <>\n                 <Stack.Screen\n                  name=\"SignIn\"\n                  component={Login}\n                  options={{\n                    headerShown:false,\n                // When logging out, a pop animation feels intuitive\n                    animationTypeForReplace: !state.isSignedIn ? 'pop' : 'push',\n                  }}\n                />\n                <Stack.Screen\n                  name=\"SignUp\"\n                  component={SignUp}\n                  options={{\n                    headerShown:false,\n                // When logging out, a pop animation feels intuitive\n                    animationTypeForReplace: !state.isSignedIn ? 'pop' : 'push',\n                  }}\n                />\n                </> : <><Stack.Screen name=\"Main\" component={DrawerNav} options={{ headerShown:false }}/>\n                  <Stack.Screen name=\"Settings\" component={Settings} />\n                {/* <Stack.Screen name=\"Projects\" component={Home} /> */}\n              \n                {/* <Stack.Screen name=\"ProjectOptions\" component={ProjectOptions} />\n                <Stack.Screen name=\"Notification\" component={Notification} />\n                <Stack.Screen name=\"Settings\" component={Settings} /> */}\n              </>}\n            </Stack.Navigator>\n          </ProjectsContext.Provider>\n        </DeepLinkContext.Provider>\n      </MainStackLoadedContext.Provider>\n      <FlashMessage position=\"top\" />\n    </NavigationContainer>\n  );\n}\n"],"sourceRoot":""}