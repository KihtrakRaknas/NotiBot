(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{351:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ve}));var r=n(11),o=n.n(r),a=n(3),i=n.n(a),l=n(14),c=n.n(l),u=n(0),s=n.n(u),d=n(124),f=n(27),m=n(7),p=n(269),h=n(535),g=n(537),y=s.a.createContext(),b=s.a.createContext(),v=s.a.createContext(),S=n(137),x=n(80),w=n(26),E=n(31),j=Object(u.createRef)();function I(e){var t;null==(t=j.current)||t.dispatch(e)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(E.getStateFromPath)(e,t),r=Object(E.getActionFromState)(n);void 0!==r&&I(r)}var T=function(){return{navigationRef:j,linkTo:P}},C=n(106),O=n(5),k=n(22),A=n(56),B=n(2);function L(){return s.a.createElement(O.default,{style:N.container},s.a.createElement(k.default,{style:N.loadingText},"Loading"),s.a.createElement(A.default,{size:"large",color:"white"}))}var N=B.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"red"},loadingText:{marginBottom:20,color:"white"}}),D=n(35),R=n(51),U=n(92),z=n(28),F=n(77),W=n(33),M=n(350),V=n(198),q=n(24),G=n(81);function J(e){var t=e.navigation,n=s.a.useState(""),r=c()(n,2),o=r[0],a=r[1],l=s.a.useState(""),u=c()(l,2),d=u[0],f=u[1],p=s.a.useState(null),h=c()(p,2),g=h[0],y=h[1];s.a.useEffect((function(){C.hideAsync()}),[!0]),s.a.useEffect((function(){if("android"==m.default.OS)return G.warmUpAsync(),function(){G.coolDownAsync()};"standalone"==w.default.appOwnership&&V.initAsync({}).catch((function(e){var t=e.message;R.default.alert("GoogleSignIn.initAsync(): "+t)}))}),[]);var b=M.useIdTokenAuthRequest({expoClientId:"896187396809-tn4obhk9l23t5u8uhmrspmn89iph7lr0.apps.googleusercontent.com",webClientId:"896187396809-5tbhq093deljombkbflt9c5mrfu7qvum.apps.googleusercontent.com",androidClientId:"896187396809-i55h6jach0jrja5studqj9dr2iiuhf8a.apps.googleusercontent.com",iosClientId:"896187396809-2ks3dj1dogegfsc8a9jr32s33tt4rben.apps.googleusercontent.com"}),v=c()(b,3),S=v[0],x=v[1],E=v[2];return s.a.useEffect((function(){if(console.log("response: "),console.log(x),"success"===(null==x?void 0:x.type)){var e=x.params.id_token;console.log(e);var t=W.default.auth.GoogleAuthProvider.credential(e);W.default.auth().signInWithCredential(t).catch((function(e){console.log(e),R.default.alert(e.message)}))}}),[x]),s.a.createElement(U.default,{behavior:"ios"==m.default.OS?"padding":"height",style:Y.container},s.a.createElement(F.default,{style:{flex:1,justifyContent:"center",alignItems:"center",margin:20}},s.a.createElement(k.default,{style:Y.title},"Login"),g&&s.a.createElement(k.default,{style:Y.errorMessage},g),s.a.createElement(O.default,{style:Y.textInputBox},s.a.createElement(D.default,{placeholder:"Email",placeholderTextColor:"white",autoCapitalize:"none",style:Y.textInput,onChangeText:a,value:o})),s.a.createElement(O.default,{style:Y.textInputBox},s.a.createElement(D.default,{secureTextEntry:!0,placeholder:"Password",placeholderTextColor:"white",autoCapitalize:"none",style:Y.textInput,onChangeText:f,value:d})),s.a.createElement(z.default,{style:[Y.submitButton,{backgroundColor:"blue"}],onPress:function(){W.default.auth().signInWithEmailAndPassword(o,d).then((function(e){})).catch((function(e){e.message.includes("The user may have been deleted")&&(e.message=e.message.substring(0,e.message.indexOf("The user may have been deleted"))),R.default.alert(e.message),y(e.message)}))}},s.a.createElement(k.default,{style:{color:"white",fontSize:20}},"Sign In")),("ios"!=m.default.OS||"standalone"!=w.default.appOwnership||"The password is invalid or the user does not have a password."==g)&&s.a.createElement(q.SocialIcon,{title:"Sign In With Google",disabled:("standalone"!=w.default.appOwnership||"web"==m.default.OS)&&!S,button:!0,light:!0,style:Y.submitButton,type:"google",onPress:function(){var e,t,n,r,o;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if("standalone"==w.default.appOwnership&&"web"!=m.default.OS){a.next=5;break}console.log("promting async"),E(),a.next=19;break;case 5:return a.prev=5,a.next=8,i.a.awrap(V.askForPlayServicesAsync());case 8:return a.next=10,i.a.awrap(V.signInAsync());case 10:e=a.sent,t=e.type,n=e.user,"success"===t&&(r=n.auth.idToken,console.log(r),o=W.default.auth.GoogleAuthProvider.credential(r),W.default.auth().signInWithCredential(o).catch((function(e){console.log(e),R.default.alert(e.message)}))),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(5),a.t0.message;case 19:case"end":return a.stop()}}),null,null,[[5,16]],Promise)}}),s.a.createElement(q.Button,{titleStyle:{color:"white"},title:"Don't have an account? Sign Up",disabled:("standalone"!=w.default.appOwnership||"web"!=m.default.OS)&&!S,onPress:function(){return t.navigate("SignUp",{email:o})},type:"clear"})))}G.maybeCompleteAuthSession();var Y=B.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"red"},textInputBox:{borderBottomColor:"white",borderBottomWidth:1,marginBottom:40,alignSelf:"stretch"},textInput:{fontSize:24,height:40,fontWeight:"200",marginBottom:0,color:"white"},title:{fontSize:50,marginBottom:30,color:"white"},submitButton:{alignItems:"center",padding:15,borderRadius:7,marginBottom:10,margin:7,alignSelf:"stretch"},errorMessage:{color:"blue",marginBottom:20}});function H(e){var t=e.navigation,n=e.route,r=s.a.useState(n.params.email),o=c()(r,2),a=o[0],i=o[1],l=s.a.useState(null),u=c()(l,2),d=u[0],f=u[1],m=s.a.useState(null),p=c()(m,2),h=p[0],g=p[1];return s.a.createElement(U.default,{behavior:"padding",style:$.container},s.a.createElement(F.default,{style:{flex:1,justifyContent:"center",alignItems:"center"}},s.a.createElement(k.default,{style:$.title},"Sign Up"),h&&s.a.createElement(k.default,{style:{color:"blue",marginBottom:20}},h),s.a.createElement(O.default,{style:$.textInputBox},s.a.createElement(D.default,{placeholder:"Email",placeholderTextColor:"white",autoCapitalize:"none",style:$.textInput,onChangeText:i,value:a})),s.a.createElement(O.default,{style:$.textInputBox},s.a.createElement(D.default,{secureTextEntry:!0,placeholder:"Password",placeholderTextColor:"white",autoCapitalize:"none",style:$.textInput,onChangeText:f,value:d})),s.a.createElement(z.default,{style:$.submitButton,onPress:function(){W.default.auth().createUserWithEmailAndPassword(a,d).then((function(){})).catch((function(e){g(e.message),R.default.alert(e.message)}))}},s.a.createElement(k.default,{style:{color:"white",fontSize:20}},"Create Account")),s.a.createElement(q.Button,{titleStyle:{color:"white"},title:"Already have an account? Login",onPress:function(){return t.navigate("SignIn")},type:"clear"})))}var $=B.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"red"},textInputBox:{borderBottomColor:"white",borderBottomWidth:1,marginBottom:40,alignSelf:"stretch"},textInput:{alignSelf:"stretch",fontSize:24,height:40,fontWeight:"200",marginBottom:0,color:"white"},title:{fontSize:50,marginBottom:30,color:"white"},submitButton:{alignItems:"center",backgroundColor:"blue",alignSelf:"stretch",padding:15,borderRadius:7,marginBottom:10}}),_=n(20),K=n.n(_),Z=n(78),X=n(72),Q=n(531),ee=n(532),te=n(540),ne=n(533),re=n(534),oe=n(123),ae=n.n(oe);function ie(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e){for(var t,n=0,r=ie(e);!(t=r()).done;){n+=t.value.charCodeAt(0)}n%=126;var o="#"+(n/=126).toString(16).substr(2,6);return console.log(o),[o+"00",o+"30"]},ue=n(223),se=n(164);function de(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me=x.createURL("/");function pe(e){var t=e.navigation,n=s.a.useContext(y),r=(n.projectsData,n.listenToProject),o=n.stopListeningToProject,a=s.a.useState(!0),l=c()(a,2),d=l[0],f=l[1],p=s.a.useState([]),h=c()(p,2),g=h[0],S=h[1],x=s.a.useState(null),E=c()(x,2),j=E[0],I=E[1],P=s.a.useState(!1),T=c()(P,2),C=T[0],B=T[1],L=s.a.useState(""),N=c()(L,2),R=N[0],U=N[1],z=s.a.useState(""),F=c()(z,2),M=F[0],V=F[1],J=Object(u.useContext)(b),Y=Object(u.useContext)(v),H=Object(se.default)(),$=W.default.auth().currentUser.uid,_=W.default.firestore();function oe(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(re.default("standard",[{identifier:"deleteNotif",buttonTitle:"Delete",options:{opensAppToForeground:!1,isAuthenticationRequired:!0,isDestructive:!0}}],{previewPlaceholder:"NotiBot Notification"}));case 2:return e.next=4,i.a.awrap(re.default("webhookbutton",[{identifier:"webhookAction",buttonTitle:"Trigger Webhook Action",options:{opensAppToForeground:!0,isAuthenticationRequired:!0,isDestructive:!1}},{identifier:"deleteNotif",buttonTitle:"Delete",options:{opensAppToForeground:!0,isAuthenticationRequired:!0,isDestructive:!0}}],{previewPlaceholder:"NotiBot Notification With Webhook Action"}));case 4:return e.next=6,i.a.awrap(re.default("webhooktext",[{identifier:"webhookReply",buttonTitle:"Send Text to Webhook",textInput:{submitButtonTitle:"SEND",placeholder:""},options:{opensAppToForeground:!0,isAuthenticationRequired:!0,isDestructive:!1}},{identifier:"deleteNotif",buttonTitle:"Delete",options:{opensAppToForeground:!0,isAuthenticationRequired:!0,isDestructive:!0}}],{previewPlaceholder:"NotiBot Notification With Webhook Reply"}));case 6:case"end":return e.stop()}}),null,null,null,Promise)}s.a.useEffect((function(){w.default.isDevice&&"web"!==m.default.OS&&function(){var e,t,n,r,o,a;return i.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return"android"===m.default.OS&&Q.default("default",{name:"default",importance:ee.AndroidImportance.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF00007C"}),l.next=3,i.a.awrap(te.getPermissionsAsync());case 3:if(e=l.sent,t=e.status,n=t,"granted"===t){l.next=12;break}return l.next=9,i.a.awrap(te.requestPermissionsAsync());case 9:r=l.sent,o=r.status,n=o;case 12:if("granted"===n){l.next=15;break}return alert("Failed to get push token for push notification!"),l.abrupt("return");case 15:return l.next=17,i.a.awrap(ne.default());case 17:a=l.sent.data,console.log(a),W.default.firestore().collection("Users").doc($).set({"Push Tokens":W.default.firestore.FieldValue.arrayUnion(a)},{merge:!0});case 20:case"end":return l.stop()}}),null,null,null,Promise)}().then(oe)}),[!0]),s.a.useLayoutEffect((function(){var e=null==J?void 0:J.substring(me.length-1);e&&e.length>1&&"/"==e[0]||j!==g.length||Y.current.queue||0!=Y.current.projectsLoaded||(Y.current.projectsLoaded=!0,g.length>0&&(console.log("opening most recent project!"),t.navigate("Project",{title:g[0].title})),t.openDrawer()),Y.current.mainStackLoaded()}),[g,j]),s.a.useEffect((function(){var e=null==J?void 0:J.substring(me.length-1);e&&e.length>1&&"/"==e[0]&&H(encodeURI(e))}),[!0]),s.a.useLayoutEffect((function(){var e=[],t=W.default.firestore().collection("Users").doc($).onSnapshot({includeMetadataChanges:!0},(function(t){if("Server"==(t.metadata.hasPendingWrites?"Local":"Server")){var n=t.data()&&t.data().Projects?t.data().Projects:[];console.log(t.data()),console.log("Current data: "+n);for(var o,a=function(t){if(!g.some((function(e){return e.title==t}))){var n=function(e){S((function(n){return n=n.filter((function(e){return e.title!=t})),e&&(n=[{title:t,subtitle:null!=e&&e.Notifications&&e.Notifications.length>0?e.Notifications[e.Notifications.length-1].title:"No notifications yet!",timestamp:null!=e&&e.Notifications&&e.Notifications.length>0?e.Notifications[e.Notifications.length-1].timestamp:0}].concat(K()(n)),console.log("adding project to array: "+t)),n.sort((function(e,t){return(null==t?void 0:t.timestamp)-(null==e?void 0:e.timestamp)})),f(!1),console.log("new projects: "+JSON.stringify(n)),n}))};r(t,n,!0),e.push({projectName:t,subFunc:n})}},i=de(n);!(o=i()).done;){a(o.value)}I(n.length),0==n.length&&f(!1)}}));return function(){for(var n=0,r=e;n<r.length;n++){var a=r[n],i=a.projectName,l=a.subFunc;o(i,l)}t()}}),[]);var ie=function(){U(""),V(""),B(!C)};return s.a.createElement(s.a.Fragment,null,s.a.createElement(q.Overlay,{isVisible:C,onBackdropPress:ie,ModalComponent:"web"===m.default.OS?ae.a:X.default,overlayStyle:["web"!=m.default.OS?{width:"80%",margin:"30%",maxWidth:400}:{},{backgroundColor:"red",borderRadius:10,bottom:"20%"}]},s.a.createElement(O.default,null,s.a.createElement(O.default,{style:he.textInputBox},s.a.createElement(D.default,{placeholder:"Project Name",placeholderTextColor:"white",autoCapitalize:"none",style:he.textInput,onChangeText:U,value:R})),""!=M&&s.a.createElement(k.default,{style:he.errorMessage},M),s.a.createElement(q.Button,{title:"Create Project",onPress:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(R.toUpperCase().length<2)){e.next=3;break}return V("Your name must be at least 2 characters. You only have: "+R.length),e.abrupt("return",!1);case 3:if(R.toUpperCase().match("^[A-Z0-9]+$")){e.next=6;break}return V("Your name must only have letters and numbers (no spaces or special characters)"),e.abrupt("return",!1);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),null,null,null,Promise));case 2:if(!e.sent){e.next=15;break}return e.prev=4,e.next=7,i.a.awrap(_.collection("Projects").doc(R.toUpperCase()).set({Owner:W.default.firestore.FieldValue.arrayUnion($)}));case 7:return e.next=9,i.a.awrap(_.collection("Users").doc($).set({Projects:W.default.firestore.FieldValue.arrayUnion(R.toUpperCase())},{merge:!0}));case 9:B(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),"permission-denied"!=e.t0.code&&"already-exists"!=e.t0.code||V("Name already taken: "+R);case 15:case"end":return e.stop()}}),null,null,[[4,12]],Promise)}}))),s.a.createElement(q.Header,{backgroundColor:"red",leftComponent:{icon:"plus",type:"ant-design",color:"white",onPress:ie,size:23},centerComponent:{text:"Projects",style:{color:"white",fontSize:18,fontWeight:"bold"}},rightComponent:{icon:"settings",type:"feather",color:"white",onPress:function(){return t.navigate("Settings")},size:23}}),s.a.createElement(ue.LinearGradient,{colors:["#ff000090","red"],start:{x:0,y:.6},end:{x:0,y:0},style:he.container},d&&s.a.createElement(A.default,{size:"large"}),!d&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Z.default,{style:{height:"100%",width:"100%"},data:g,renderItem:function(e){var n=e.item;return console.log("item: "+JSON.stringify(n)),s.a.createElement(q.ListItem,{style:{borderRadius:20,marginVertical:5},bottomDivider:!0,topDivider:!0,onPress:function(){t.navigate("Project",{title:n.title})},linearGradientProps:{colors:ce(n.title),start:{x:1,y:0},end:{x:0,y:0}},ViewComponent:ue.LinearGradient,containerStyle:{borderRadius:20}},s.a.createElement(q.Avatar,{size:"large",rounded:!0,title:n.title.substring(0,2)}),s.a.createElement(q.ListItem.Content,null,s.a.createElement(q.ListItem.Title,{style:he.listItemTitle,adjustsFontSizeToFit:!0,numberOfLines:1},n.title),s.a.createElement(q.ListItem.Subtitle,{style:he.listItemSubtitle},n.subtitle)),s.a.createElement(q.ListItem.Chevron,null))},keyExtractor:function(e){return e.title},ListFooterComponent:"web"==m.default.OS&&s.a.createElement(q.Button,{title:"Open Docs",titleStyle:{textDecorationLine:"underline",color:"white"},onPress:function(){return G.openBrowserAsync("https://notibotdocs.kihtrak.com",{controlsColor:"#FF0000",showTitle:!0})},type:"clear"}),ListEmptyComponent:s.a.createElement(O.default,{style:{flex:1,flexGrow:1,justifyContent:"center",alignItems:"center",padding:20}},s.a.createElement(k.default,{style:{color:"white"}},"You currently have no projects"),s.a.createElement(q.Button,{style:{marginTop:10},title:"Create a new project",onPress:ie}))}))))}var he=B.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",paddingTop:5,paddingHorizontal:5},textInputBox:{borderBottomColor:"white",borderBottomWidth:1,marginBottom:20,alignSelf:"stretch"},textInput:{fontSize:24,height:40,fontWeight:"200",marginBottom:0,color:"white",textAlign:"center"},errorMessage:{color:"blue",marginBottom:20},listItemTitle:{fontSize:"web"!=m.default.OS?30:20,fontWeight:"bold"},listItemSubtitle:{}});n(254);function ge(e){e.navigation;return s.a.createElement(O.default,{style:ye.container},s.a.createElement(q.Button,{buttonStyle:ye.dangerButton,title:"Sign Out",onPress:function(){W.default.auth().signOut().then().catch((function(e){return console.error("Sign Out Error",e)}))}}),s.a.createElement(q.Button,{buttonStyle:ye.dangerButton,title:"Delete Account",onPress:function(){W.default.auth().currentUser.getIdToken(!0).then((function(e){return fetch("https://noti.kihtrak.com/deleteProfile",{body:JSON.stringify({idToken:e}),method:"POST",headers:{"Content-Type":"application/json"}})})).then((function(e){return e.json()})).then((function(e){var t=null==e?void 0:e.error;t&&R.default.alert(t)})).catch((function(e){return R.default.alert("An error occurred while attempting delete your account")}))},containerStyle:{marginTop:20}}))}var ye=B.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},dangerButton:{backgroundColor:"red"}});function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}x.createURL("/");function Se(e){var t,n,r=e.navigation,o=e.route,a=Object(u.useContext)(y),i=a.projectsData,l=a.listenToProject,f=a.stopListeningToProject,m=null==(t=o.params)?void 0:t.title,p=Object(u.useState)(null==i||null==(n=i[m])?void 0:n.Notifications),h=c()(p,2),g=h[0],b=h[1],v=Object(d.default)().width>=768;s.a.useEffect((function(){if(m){var e=function(e){e?b(e.Notifications):r.openDrawer()};return l(m,e,!0),function(){return f(m,e)}}}),[m]),s.a.useLayoutEffect((function(){r.setOptions(ve(ve({},m?{title:m,headerRight:function(){return s.a.createElement(q.Button,{icon:{name:"ios-options-outline",type:"ionicon",size:25,color:"white"},type:"clear",onPress:function(){return r.navigate("ProjectOptions",{title:m})}})}}:{title:""}),{},{headerLeft:function(){return v?null:s.a.createElement(q.Button,{icon:{name:"menu",type:"entypo",size:25,color:"white"},type:"clear",onPress:function(){return r.openDrawer()}})}}))}),[r,m]);return m?s.a.createElement(O.default,{style:xe.container},s.a.createElement(Z.default,{style:{height:"100%",width:"100%"},data:g?K()(g).reverse():[],renderItem:function(e){var t=e.item,n=e.index;return s.a.createElement(q.ListItem,{style:xe.listItem,bottomDivider:!0,topDivider:!0,onPress:function(){return r.navigate("Notification",{index:g.length-1-n,timestamp:t.timestamp,projTitle:m})}},s.a.createElement(q.ListItem.Content,null,s.a.createElement(q.ListItem.Title,null,t.title.substring(0,30)),s.a.createElement(q.ListItem.Subtitle,null,function(e){return e.subtitle?e.subtitle:e.body?e.body:""}(t).substring(0,40)),s.a.createElement(q.ListItem.Subtitle,{left:!0},new Date(t.timestamp).toLocaleString())),s.a.createElement(q.ListItem.Chevron,null))},keyExtractor:function(e){return e.title+e.timestamp},ListEmptyComponent:s.a.createElement(O.default,{style:{flex:1,flexGrow:1,height:"100%",justifyContent:"center",alignItems:"center",padding:20}},s.a.createElement(k.default,{style:{fontSize:15,textAlign:"center",marginVertical:20}},"The project currently has no notifications"),s.a.createElement(q.Button,{title:"Learn how to send yourself a notification",titleStyle:{textDecorationLine:"underline"},onPress:function(){return G.openBrowserAsync("https://notibotdocs.kihtrak.com",{controlsColor:"#FF0000",showTitle:!0})},type:"clear"}))})):s.a.createElement(O.default,{style:xe.container},s.a.createElement(k.default,{style:{fontSize:15,textAlign:"center"}},"Select a project"))}var xe=B.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"}}),we=n(49),Ee=n(354),je=(n(505),["Owner","Manager","Subscriber"]);function Ie(e){var t,n,r=e.navigation,o=e.route,a=s.a.useContext(y),l=a.projectsData,u=a.listenToProject,d=a.stopListeningToProject,f=o.params,m=f.index,p=f.timestamp,h=f.projTitle,g=f.resValue,b=s.a.useState(null==l||null==(t=l[h])||null==(n=t.Notifications)?void 0:n[m]),v=c()(b,2),S=v[0],x=v[1],w=s.a.useState(""),E=c()(w,2),j=E[0],I=E[1],P=s.a.useState(g||""),T=c()(P,2),C=T[0],k=T[1],A=function(){for(var e=W.default.auth().currentUser.uid,t=0,n=[0,1];t<n.length;t++){var r,o,a=n[t];if(null!=l&&null!=(r=l[h])&&null!=(o=r[je[a]])&&o.includes(e))return!0}return!1},B=s.a.useState(A()),N=c()(B,2),R=N[0],U=N[1],M=W.default.firestore();s.a.useLayoutEffect((function(){var e=r.dangerouslyGetState();console.log("oldState"),console.log(JSON.stringify(e));var t=e.routes,n=e.index,o=null==t?void 0:t[t.length-2];"Project"==(null==o?void 0:o.name)&&(o.params||(o.params={title:h},console.log("oldState"),console.log(JSON.stringify(e)),r.reset({index:n,routes:t})))}),[r]),s.a.useEffect((function(){var e=function(e){if(e&&e.Notifications){for(var t=e.Notifications.length;t>-1&&(!e.Notifications[t]||e.Notifications[t].timestamp>p);)t--;e.Notifications[t]&&e.Notifications[t].timestamp==p?(U(A()),x(e.Notifications[t]),r.setParams({index:t})):r.goBack()}else r.goBack()};return u(h,e,!0),function(){return d(h,e)}}),[h,p]);var V=function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(M.collection("Projects").doc(h).set({Notifications:W.default.firestore.FieldValue.arrayRemove(S)},{merge:!0}));case 2:case"end":return e.stop()}}),null,null,null,Promise)};s.a.useLayoutEffect((function(){r.setOptions({title:null==S?void 0:S.title,headerRight:function(){return R&&s.a.createElement(q.Button,{disabled:!R,icon:{name:"trash-outline",type:"ionicon",size:25,color:"white"},type:"clear",titleStyle:Pe.headerButtonTitle,onPress:V})}})}),[r,R,S]);return S?s.a.createElement(Ee.KeyboardAwareScrollView,null,s.a.createElement(we.default,null,s.a.createElement(F.default,null,s.a.createElement(O.default,{style:Pe.headerView},s.a.createElement(q.Text,{h1:!0,style:{textAlign:"center"}},S.title)),s.a.createElement(O.default,{style:{alignItems:"center"}},s.a.createElement(O.default,{style:Pe.subheaderView},S.subtitle&&s.a.createElement(q.Text,{style:Pe.textMargin,h4:!0,left:!0},S.subtitle),S.timestamp&&s.a.createElement(q.Text,{style:Pe.textMargin,right:!0},new Date(S.timestamp).toLocaleString()+"\nEpoch: "+S.timestamp))),s.a.createElement(O.default,{style:Pe.dataView},s.a.createElement(q.Text,{style:[Pe.textMargin,{fontSize:25}]},S.body),S.webhook&&s.a.createElement(q.Text,{style:Pe.textMargin},"Webhook: ",S.webhook)),S.webhook&&s.a.createElement(O.default,{style:{alignItems:"center"}},S.webhookParam&&s.a.createElement(O.default,{style:Pe.textInputBox},s.a.createElement(D.default,{placeholder:"URL parameter value",autoCapitalize:"none",style:Pe.textInput,onChangeText:I,value:j})),s.a.createElement(z.default,{style:[Pe.submitButton,{backgroundColor:"green"}],onPress:function(){var e=S.webhook+j;fetch(e).then((function(e){return e.text()})).then(k).catch((function(e){return k(e.toString())}))}},s.a.createElement(q.Text,{style:{color:"white",fontSize:20}},"Call ",S.webhook+j," ",C&&"Again"))),s.a.createElement(O.default,{style:Pe.dataView},!!C&&s.a.createElement(q.Text,{style:Pe.textMargin},"Response: ",C))))):s.a.createElement(L,null)}var Pe=B.default.create({container:{flex:1},headerView:{alignItems:"center",margin:10},subheaderView:{flex:1,flexDirection:"row",justifyContent:"space-between"},textMargin:{margin:10},headerButtonTitle:{color:"white"},dataView:{flex:1,flexDirection:"column",justifyContent:"flex-start"},textInputBox:{borderBottomColor:"black",borderBottomWidth:1,margin:10,marginBottom:40,alignSelf:"stretch"},textInput:{fontSize:24,height:40,fontWeight:"200",marginBottom:0,color:"black"},submitButton:{alignItems:"center",padding:15,borderRadius:7,marginBottom:10,margin:7,alignSelf:"stretch"}}),Te=n(330);function Ce(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ke=["Full Access","Can't delete project or edit team members","Can only view data, can't delete notifications"];function Ae(e){var t=e.navigation,n=e.route,r=s.a.useContext(y),a=r.projectsData,l=r.listenToProject,u=r.stopListeningToProject,d=n.params.title,f=s.a.useState([]),p=c()(f,2),h=p[0],g=p[1],b=s.a.useState(je.length),v=c()(b,2),S=v[0],x=v[1],w=s.a.useState(!1),E=c()(w,2),j=E[0],I=E[1],P=s.a.useState(!1),T=c()(P,2),C=T[0],B=T[1],L=s.a.useState(""),N=c()(L,2),U=N[0],z=N[1],F=s.a.useState(""),M=c()(F,2),V=M[0],G=M[1],J=s.a.useRef({}),Y=W.default.firestore(),H=(a[d],W.default.auth().currentUser.uid);s.a.useLayoutEffect((function(){var e=function(e){if(console.log("triggered"),e){for(var n,r,o=[],a=function(t){if(console.log(t),e[t])for(var r,a=function(e){console.log(e),e==H&&(n=je.indexOf(t)),J.current[e]?o.push({group:t,profile:J.current[e]}):fetch("https://noti.kihtrak.com/getProfileInfo",{body:JSON.stringify({uid:e}),method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(n){J.current[e]=n,g((function(n){return[].concat(K()(n),[{group:t,profile:J.current[e]}])}))}))},i=Ce(e[t]);!(r=i()).done;){a(r.value)}},i=Ce(je);!(r=i()).done;){a(r.value)}x(n),o.length>0&&g(o),0!=n||e[je[0]].length>1?I(!0):I(!1)}else t.goBack()};return l(d,e,!0),function(){return u(d,e)}}),[]),s.a.useLayoutEffect((function(){t.setOptions({title:d+" Options"})}),[t]);var $=function(){z(""),G(""),B(!C)},_=function(e){fetch("https://noti.kihtrak.com/getProfileByEmail",{body:JSON.stringify({email:e}),method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),W.default.auth().currentUser.getIdToken(!0).then((function(t){return fetch("https://noti.kihtrak.com/removeUserFromProject",{body:JSON.stringify({idToken:t,project:d,uid:e.uid}),method:"POST",headers:{"Content-Type":"application/json"}})}))})).catch((function(t){return R.default.alert("An error occurred while attempting to remove "+e+" from the project")}))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(q.Overlay,{isVisible:C,onBackdropPress:$,ModalComponent:"web"===m.default.OS?ae.a:X.default,overlayStyle:["web"!=m.default.OS?{width:"80%",margin:"30%",maxWidth:400}:{},{backgroundColor:"red",borderRadius:10,bottom:"20%"}]},s.a.createElement(O.default,null,s.a.createElement(O.default,{style:Be.textInputBox},s.a.createElement(D.default,{placeholder:"Email",placeholderTextColor:"white",autoCapitalize:"none",style:Be.textInput,onChangeText:z,value:U})),""!=V&&s.a.createElement(k.default,{style:Be.errorMessage},V),s.a.createElement(q.Button,{title:"Add User",onPress:function(){fetch("https://noti.kihtrak.com/getProfileByEmail",{body:JSON.stringify({email:U}),method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),W.default.auth().currentUser.getIdToken(!0).then((function(t){return fetch("https://noti.kihtrak.com/addUserToProject",{body:JSON.stringify({idToken:t,project:d,uid:e.uid}),method:"POST",headers:{"Content-Type":"application/json"}})}))})).then((function(){return B(!1)})).catch((function(e){return R.default.alert("An error occurred while attempting to add "+U+" to the project")}))}}))),s.a.createElement(we.default,{contentContainerStyle:Be.container},s.a.createElement(O.default,{style:{width:"100%"}},function(){var e=[],t=function(t){var n=h[t],r=void 0;e.push(s.a.createElement(q.ListItem,{key:n.profile.email,style:[Be.listItem,{zIndex:-1*t}],bottomDivider:!0,topDivider:!0},s.a.createElement(q.Avatar,{source:{uri:n.profile.photoURL},title:n.profile.email.substring(0,2),rounded:!0}),s.a.createElement(q.ListItem.Content,null,s.a.createElement(q.ListItem.Title,null,n.profile.displayName),s.a.createElement(q.ListItem.Subtitle,{adjustsFontSizeToFit:!0,numberOfLines:1},n.profile.email)),s.a.createElement(Te.default,{disabled:S>0||H==n.profile.uid&&!j,items:[].concat(K()(je),["Remove"]).map((function(e){return{label:e,value:e}})),defaultValue:n.group,containerStyle:{flexGrow:.5},itemStyle:{overflow:"visible"},controller:function(e){return r=e},onChangeItem:function(e){var t=e.value;if(console.log(t),"Remove"==t)R.default.alert("Remove "+n.profile.email,"Are you sure you want remove "+n.profile.email+" from this project?",[{text:"Remove",onPress:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:_(n.profile.email);case 1:case"end":return e.stop()}}),null,null,null,Promise)},style:"destructive"},{text:"Cancel",style:"cancel",onPress:function(){r.selectItem(n.group)}}],{cancelable:!0,onDismiss:function(){r.selectItem(n.group)}});else{var o={};je.forEach((function(e){o[e]=W.default.firestore.FieldValue.arrayRemove(n.profile.uid)})),o[t]=W.default.firestore.FieldValue.arrayUnion(n.profile.uid),Y.collection("Projects").doc(d).update(o)}}})))};for(var n in h)t(n);return 0==e.length?s.a.createElement(A.default,{size:"large",style:{padding:10}}):e}()),s.a.createElement(q.ListItem,{style:[{zIndex:-9},Be.listItem],bottomDivider:!0,topDivider:!0,disabled:S>0,onPress:$},s.a.createElement(q.Icon,{name:"plus",type:"ant-design",color:"blue"}),s.a.createElement(q.ListItem.Content,null,s.a.createElement(q.ListItem.Title,null,"Add User"))),function(){var e=[];for(var t in je)e.push(s.a.createElement(O.default,{key:t,style:[Be.listItem,Be.descContainer]},s.a.createElement(k.default,{style:[t==S?{color:"blue"}:{},Be.groupTitle,Be.groupText]},je[t]),s.a.createElement(k.default,{style:[Be.groupDesc,Be.groupText]},ke[t])));return e}(),s.a.createElement(q.Button,{disabled:S>1,containerStyle:{marginTop:20},title:"Delete Notifications",buttonStyle:Be.deleteButton,onPress:function(){R.default.alert("Delete "+d,"Are you sure you want to delete all of "+d+"'s notifications?",[{text:"Delete",onPress:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(Y.collection("Projects").doc(d).update({Notifications:W.default.firestore.FieldValue.delete()}).then((function(){return t.goBack()})).catch((function(e){return R.default.alert("An error occurred while attempting to delete the notifications")})));case 2:case"end":return e.stop()}}),null,null,null,Promise)},style:"destructive"},{text:"Cancel",style:"cancel"}],{cancelable:!0})}}),s.a.createElement(q.Button,{disabled:!j,containerStyle:{marginTop:20},title:"Leave Project",buttonStyle:Be.leaveButton,onPress:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.awrap(Y.collection("Projects").doc(d).update(o()({},je[S],W.default.firestore.FieldValue.arrayRemove(H))));case 2:return e.next=4,i.a.awrap(Y.collection("Users").doc(H).update({Projects:W.default.firestore.FieldValue.arrayRemove(d)}));case 4:case"end":return e.stop()}}),null,null,null,Promise)}}),!j&&s.a.createElement(k.default,{style:Be.explanationText},"You are the only owner, you can't leave until appointing a new owner"),s.a.createElement(q.Button,{disabled:S>0,containerStyle:{marginTop:20},title:"Delete Project",buttonStyle:Be.deleteButton,onPress:function(){R.default.alert("Delete "+d,"Are you sure you want to delete "+d+"?",[{text:"Delete",onPress:function(){return i.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:W.default.auth().currentUser.getIdToken(!0).then((function(e){return fetch("https://noti.kihtrak.com/deleteProject",{body:JSON.stringify({idToken:e,project:d}),method:"POST",headers:{"Content-Type":"application/json"}})})).catch((function(e){return R.default.alert("An error occurred while attempting to delete the project")}));case 1:case"end":return e.stop()}}),null,null,null,Promise)},style:"destructive"},{text:"Cancel",style:"cancel"}],{cancelable:!0})}})))}var Be=B.default.create({container:{paddingBottom:20,alignItems:"center"},deleteButton:{backgroundColor:"red"},leaveButton:{backgroundColor:"blue"},listItem:{width:"100%"},descContainer:{flexGrow:1,flexDirection:"row",padding:10,zIndex:-99},groupTitle:{marginRight:10,flexBasis:100},groupText:{fontSize:15},groupDesc:{flexShrink:1,flexWrap:"wrap"},explanationText:{textAlign:"center",marginHorizontal:20},textInputBox:{borderBottomColor:"white",borderBottomWidth:1,marginBottom:20,alignSelf:"stretch"},textInput:{fontSize:24,height:40,fontWeight:"200",marginBottom:0,color:"white",textAlign:"center"}}),Le=n(538);function Ne(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return De(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}try{W.default.initializeApp({apiKey:"AIzaSyBc_AtukKnVqdNYRefB-NtZLy5otD8KMvA",authDomain:"notibotapp.firebaseapp.com",databaseURL:"https://notibotapp.firebaseio.com",projectId:"notibotapp",storageBucket:"notibotapp.appspot.com"})}catch(qe){}var ze=Object(h.default)(),Fe=Object(g.default)(),We=W.default.firestore(),Me=x.createURL("/");function Ve(){var e=s.a.useRef({}),t=(s.a.useRef({}),s.a.useRef({})),n=s.a.useRef({}),r=Object(u.useRef)(),o=Object(u.useRef)(),a=Object(u.useRef)({mainStackLoaded:function(){setTimeout((function(){return C.hideAsync().catch()}),500),a.current.loaded=!0,a.current.queue&&a.current.queue()},loaded:!1,projectsLoaded:!1,queue:null}),l=s.a.useState(null),h=c()(l,2),g=h[0],E=h[1],j=("web"===m.default.OS?f.default.get("window").width:Object(d.default)().width)>=768,I=T(),P=function(e){a.current.loaded?I.linkTo(e):a.current.queue=function(){return I.linkTo(e)}};s.a.useLayoutEffect((function(){if(w.default.isDevice&&"web"!==m.default.OS)return r.current=Le.addNotificationReceivedListener((function(e){var t=e.request.content;Object(S.showMessage)({message:t.title,description:t.body,type:"info",hideStatusBar:!0,onPress:function(){var e,n,r;I.linkTo("/Main/Projects/Notification?projTitle="+(null==(e=t.data)?void 0:e.project)+"&timestamp="+(null==(n=t.data)||null==(r=n.firebaseData)?void 0:r.timestamp))}})})),o.current=Le.addNotificationResponseReceivedListener((function(e){var t,n,r,o,a,l;return i.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t=e.notification.request.content.data,"deleteNotif"!=e.actionIdentifier){i.next=3;break}return i.abrupt("return",We.collection("Projects").doc(null==t?void 0:t.project).set({Notifications:W.default.firestore.FieldValue.arrayRemove(null==t?void 0:t.firebaseData)},{merge:!0}));case 3:if(n="","webhookAction"!=e.actionIdentifier){i.next=8;break}n=null==t||null==(r=t.firebaseData)?void 0:r.webhook,i.next=13;break;case 8:if("webhookReply"!=e.actionIdentifier){i.next=12;break}n=(null==t||null==(o=t.firebaseData)?void 0:o.webhook)+(null==e?void 0:e.userText),i.next=13;break;case 12:return i.abrupt("return",P(encodeURI("Main/Projects/Notification?projTitle="+(null==t?void 0:t.project)+"&timestamp="+(null==t||null==(a=t.firebaseData)?void 0:a.timestamp))));case 13:l=function(e,n){var r;Object(S.showMessage)({message:n?"Webhook call failed!":"Webhook called!",type:n?"danger":"success",hideStatusBar:!0}),P(encodeURI("Main/Projects/Notification?projTitle="+(null==t?void 0:t.project)+"&timestamp="+(null==t||null==(r=t.firebaseData)?void 0:r.timestamp)+"&resValue="+e))},fetch(n).then((function(e){return e.text()})).then(l).catch((function(e){return l(e.toString(),!0)}));case 15:case"end":return i.stop()}}),null,null,null,Promise)})),function(){Le.removeNotificationSubscription(r.current),Le.removeNotificationSubscription(o.current)}}),[!0]);var O=s.a.useReducer((function(e,t){switch(t.type){case"SIGN_IN":return Ue(Ue({},e),{},{isLoading:!1,isSignedIn:t.isSignedIn});case"SIGN_OUT":return Ue(Ue({},e),{},{isLoading:!1,isSignedIn:!1})}}),{isLoading:!0,isSignedIn:!1}),k=c()(O,2),A=k[0],B=k[1];s.a.useLayoutEffect((function(){x.getInitialURL().then((function(e){E(e)}))}),[!0]),s.a.useLayoutEffect((function(){try{W.default.auth().onAuthStateChanged((function(e){console.log("Auth: "+!!e),B({type:"SIGN_IN",isSignedIn:!!e}),e&&setTimeout((function(){return C.hideAsync().catch()}),3e3)}))}catch(e){C.hideAsync().catch()}}),[]),s.a.useLayoutEffect((function(){C.preventAutoHideAsync()}),[!0]);var N={projectsData:e.current,listenToProject:function(r,o,a){t.current[r]?(console.log("listener already exists for "+r),t.current[r].push(o),a&&r in e.current&&o(e.current[r])):(console.log("creating listener for "+r),t.current[r]=[o],n.current[r]=We.collection("Projects").doc(r).onSnapshot({includeMetadataChanges:!0},(function(n){if("Server"==(n.metadata.hasPendingWrites?"Local":"Server")){e.current[r]=n.data();for(var o,a=Ne(t.current[r]);!(o=a()).done;){(0,o.value)(n.data())}}}),(function(n){e.current[r]=null;for(var o,a=Ne(t.current[r]);!(o=a()).done;){(0,o.value)(null)}})))},stopListeningToProject:function(e,r){t.current[e]||console.warn("Listener doesn't exist. How did this happen?");var o=t.current[e].indexOf(r);console.log("Index of callback in array: "+o),t.current[e].splice(o,1),0==t.current[e].length&&(t.current[e]=null,n.current[e]())}},D=function(){return s.a.createElement(ze.Navigator,{screenOptions:{headerStyle:{backgroundColor:"red"},headerTintColor:"#fff",headerTitleStyle:{fontWeight:"bold"}}},s.a.createElement(ze.Screen,{name:"Project",component:Se}),s.a.createElement(ze.Screen,{name:"ProjectOptions",component:Ae}),s.a.createElement(ze.Screen,{name:"Notification",component:Ie}))};return s.a.createElement(p.default,{ref:I.navigationRef,linking:{prefixes:[Me,"http://localhost:19006","https://notibot.kihtrak.com"],screens:{ProjectsDrawerScreen:{path:"",screens:{Projects:{path:"",screens:{Project:"project/:title",Notification:"notification/:projTitle/:timestamp/:resValue?/:index?"}}}}},subscribe:function(e){var t=function(t){var n=t.url;e(n),console.log("setInitialDeepLink("+n+")"),n!=g&&E(n)};return x.addEventListener("url",t),function(){x.removeEventListener("url",t)}}}},s.a.createElement(v.Provider,{value:a},s.a.createElement(b.Provider,{value:g},s.a.createElement(y.Provider,{value:N},s.a.createElement(ze.Navigator,{screenOptions:{headerStyle:{backgroundColor:"red"},headerTintColor:"#fff",headerTitleStyle:{fontWeight:"bold"}}},A.isLoading?s.a.createElement(ze.Screen,{name:"Splash",component:L,options:{headerShown:!1}}):0==A.isSignedIn?s.a.createElement(s.a.Fragment,null,s.a.createElement(ze.Screen,{name:"SignIn",component:J,options:{headerShown:!1,animationTypeForReplace:A.isSignedIn?"push":"pop"}}),s.a.createElement(ze.Screen,{name:"SignUp",component:H,options:{headerShown:!1,animationTypeForReplace:A.isSignedIn?"push":"pop"}})):s.a.createElement(s.a.Fragment,null,s.a.createElement(ze.Screen,{name:"Main",component:function(){return s.a.createElement(Fe.Navigator,{drawerType:j?"permanent":"back",drawerStyle:j?null:{width:"100%"},overlayColor:"transparent",drawerContent:function(e){return s.a.createElement(pe,e)},screenOptions:{gestureEnabled:!0}},s.a.createElement(Fe.Screen,{name:"Projects",component:D}))},options:{headerShown:!1}}),s.a.createElement(ze.Screen,{name:"Settings",component:ge})))))),s.a.createElement(S.default,{position:"top"}))}},361:function(e,t,n){e.exports=n(362)}},[[361,1,2]]]);
//# sourceMappingURL=app.91ea6d26.chunk.js.map